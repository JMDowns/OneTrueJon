{"version":3,"names":["Object","defineProperty","exports","value","options","require","getWindow","isElementType","level","hasPointerEvents","instance","element","_checkPointerEvents","checkPointerEvents","pointerEvents","closestPointerEventsDeclaration","window","el","tree","ownerDocument","parentElement","push","getComputedStyle","includes","undefined","PointerEventsCheck","Symbol","lastCheck","needsCheck","config","pointerEventsCheck","PointerEventsCheckLevel","Never","hasBitFlag","EachApiCall","ApiLevel","Call","getLevelRef","EachTrigger","Trigger","result","declaration","assertPointerEvents","Error","length","printTree","join","reverse","map","i","padEnd","tagName","id","hasAttribute","getAttribute","getLabelDescr","filter","Boolean","_element_labels","label","_element_ownerDocument_getElementById_textContent","_element_ownerDocument_getElementById","getElementById","textContent","trim","labels","Array","from","_el_textContent","_element_textContent","replace","Number","substring","conf","flag"],"sources":["cssPointerEvents.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar options = require('../../options.js');\nvar getWindow = require('../misc/getWindow.js');\nvar isElementType = require('../misc/isElementType.js');\nvar level = require('../misc/level.js');\n\nfunction hasPointerEvents(instance, element) {\n    var _checkPointerEvents;\n    return ((_checkPointerEvents = checkPointerEvents(instance, element)) === null || _checkPointerEvents === void 0 ? void 0 : _checkPointerEvents.pointerEvents) !== 'none';\n}\nfunction closestPointerEventsDeclaration(element) {\n    const window = getWindow.getWindow(element);\n    for(let el = element, tree = []; el === null || el === void 0 ? void 0 : el.ownerDocument; el = el.parentElement){\n        tree.push(el);\n        const pointerEvents = window.getComputedStyle(el).pointerEvents;\n        if (pointerEvents && ![\n            'inherit',\n            'unset'\n        ].includes(pointerEvents)) {\n            return {\n                pointerEvents,\n                tree\n            };\n        }\n    }\n    return undefined;\n}\nconst PointerEventsCheck = Symbol('Last check for pointer-events');\nfunction checkPointerEvents(instance, element) {\n    const lastCheck = element[PointerEventsCheck];\n    const needsCheck = instance.config.pointerEventsCheck !== options.PointerEventsCheckLevel.Never && (!lastCheck || hasBitFlag(instance.config.pointerEventsCheck, options.PointerEventsCheckLevel.EachApiCall) && lastCheck[level.ApiLevel.Call] !== level.getLevelRef(instance, level.ApiLevel.Call) || hasBitFlag(instance.config.pointerEventsCheck, options.PointerEventsCheckLevel.EachTrigger) && lastCheck[level.ApiLevel.Trigger] !== level.getLevelRef(instance, level.ApiLevel.Trigger));\n    if (!needsCheck) {\n        return lastCheck === null || lastCheck === void 0 ? void 0 : lastCheck.result;\n    }\n    const declaration = closestPointerEventsDeclaration(element);\n    element[PointerEventsCheck] = {\n        [level.ApiLevel.Call]: level.getLevelRef(instance, level.ApiLevel.Call),\n        [level.ApiLevel.Trigger]: level.getLevelRef(instance, level.ApiLevel.Trigger),\n        result: declaration\n    };\n    return declaration;\n}\nfunction assertPointerEvents(instance, element) {\n    const declaration = checkPointerEvents(instance, element);\n    if ((declaration === null || declaration === void 0 ? void 0 : declaration.pointerEvents) === 'none') {\n        throw new Error([\n            `Unable to perform pointer interaction as the element ${declaration.tree.length > 1 ? 'inherits' : 'has'} \\`pointer-events: none\\`:`,\n            '',\n            printTree(declaration.tree)\n        ].join('\\n'));\n    }\n}\nfunction printTree(tree) {\n    return tree.reverse().map((el, i)=>[\n            ''.padEnd(i),\n            el.tagName,\n            el.id && `#${el.id}`,\n            el.hasAttribute('data-testid') && `(testId=${el.getAttribute('data-testid')})`,\n            getLabelDescr(el),\n            tree.length > 1 && i === 0 && '  <-- This element declared `pointer-events: none`',\n            tree.length > 1 && i === tree.length - 1 && '  <-- Asserted pointer events here'\n        ].filter(Boolean).join('')).join('\\n');\n}\nfunction getLabelDescr(element) {\n    var _element_labels;\n    let label;\n    if (element.hasAttribute('aria-label')) {\n        label = element.getAttribute('aria-label');\n    } else if (element.hasAttribute('aria-labelledby')) {\n        var _element_ownerDocument_getElementById_textContent, _element_ownerDocument_getElementById;\n        label = (_element_ownerDocument_getElementById = element.ownerDocument.getElementById(element.getAttribute('aria-labelledby'))) === null || _element_ownerDocument_getElementById === void 0 ? void 0 : (_element_ownerDocument_getElementById_textContent = _element_ownerDocument_getElementById.textContent) === null || _element_ownerDocument_getElementById_textContent === void 0 ? void 0 : _element_ownerDocument_getElementById_textContent.trim();\n    } else if (isElementType.isElementType(element, [\n        'button',\n        'input',\n        'meter',\n        'output',\n        'progress',\n        'select',\n        'textarea'\n    ]) && ((_element_labels = element.labels) === null || _element_labels === void 0 ? void 0 : _element_labels.length)) {\n        label = Array.from(element.labels).map((el)=>{\n            var _el_textContent;\n            return (_el_textContent = el.textContent) === null || _el_textContent === void 0 ? void 0 : _el_textContent.trim();\n        }).join('|');\n    } else if (isElementType.isElementType(element, 'button')) {\n        var _element_textContent;\n        label = (_element_textContent = element.textContent) === null || _element_textContent === void 0 ? void 0 : _element_textContent.trim();\n    }\n    label = label === null || label === void 0 ? void 0 : label.replace(/\\n/g, '  ');\n    if (Number(label === null || label === void 0 ? void 0 : label.length) > 30) {\n        label = `${label === null || label === void 0 ? void 0 : label.substring(0, 29)}â€¦`;\n    }\n    return label ? `(label=${label})` : '';\n}\n// With the eslint rule and prettier the bitwise operation isn't nice to read\nfunction hasBitFlag(conf, flag) {\n    // eslint-disable-next-line no-bitwise\n    return (conf & flag) > 0;\n}\n\nexports.assertPointerEvents = assertPointerEvents;\nexports.hasPointerEvents = hasPointerEvents;\n"],"mappings":"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"}