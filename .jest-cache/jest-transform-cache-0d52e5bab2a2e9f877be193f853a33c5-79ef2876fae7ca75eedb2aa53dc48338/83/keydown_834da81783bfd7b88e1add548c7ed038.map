{"version":3,"names":["UI","require","getValueOrTextContent","isContentEditable","isEditable","isElementType","getTabDestination","selection","focus","input","moveSelection","selectAll","setSelectionRange","radio","registry","behavior","keydown","event","target","instance","_keydownBehavior_event_key","_keydownBehavior_event_key1","keydownBehavior","key","call","combinationBehavior","ArrowDown","type","walkRadio","ArrowLeft","ArrowRight","ArrowUp","Backspace","Delete","End","_getValueOrTextContent","_getValueOrTextContent_length","newPos","length","Home","PageDown","getUIValue","PageUp","Tab","dest","system","keyboard","modifiers","Shift","focusElement","hasOwnSelection","setUISelection","anchorOffset","focusOffset","value","code","Control"],"sources":["keydown.js"],"sourcesContent":["'use strict';\n\nvar UI = require('../../document/UI.js');\nvar getValueOrTextContent = require('../../document/getValueOrTextContent.js');\nrequire('../../utils/click/isClickableInput.js');\nrequire('../../utils/dataTransfer/Clipboard.js');\nvar isContentEditable = require('../../utils/edit/isContentEditable.js');\nvar isEditable = require('../../utils/edit/isEditable.js');\nrequire('../../utils/edit/maxLength.js');\nvar isElementType = require('../../utils/misc/isElementType.js');\nvar getTabDestination = require('../../utils/focus/getTabDestination.js');\nvar selection = require('../../utils/focus/selection.js');\nrequire('../../utils/keyDef/readNextDescriptor.js');\nrequire('@testing-library/dom/dist/helpers.js');\nrequire('../../utils/misc/level.js');\nrequire('../../options.js');\nvar focus = require('../focus.js');\nvar input = require('../input.js');\nvar moveSelection = require('../selection/moveSelection.js');\nvar selectAll = require('../selection/selectAll.js');\nvar setSelectionRange = require('../selection/setSelectionRange.js');\nvar radio = require('../radio.js');\nvar registry = require('./registry.js');\n\nregistry.behavior.keydown = (event, target, instance)=>{\n    var _keydownBehavior_event_key;\n    var _keydownBehavior_event_key1;\n    return (_keydownBehavior_event_key1 = (_keydownBehavior_event_key = keydownBehavior[event.key]) === null || _keydownBehavior_event_key === void 0 ? void 0 : _keydownBehavior_event_key.call(keydownBehavior, event, target, instance)) !== null && _keydownBehavior_event_key1 !== void 0 ? _keydownBehavior_event_key1 : combinationBehavior(event, target, instance);\n};\nconst keydownBehavior = {\n    ArrowDown: (event, target, instance)=>{\n        /* istanbul ignore else */ if (isElementType.isElementType(target, 'input', {\n            type: 'radio'\n        })) {\n            return ()=>radio.walkRadio(instance, target, -1);\n        }\n    },\n    ArrowLeft: (event, target, instance)=>{\n        if (isElementType.isElementType(target, 'input', {\n            type: 'radio'\n        })) {\n            return ()=>radio.walkRadio(instance, target, -1);\n        }\n        return ()=>moveSelection.moveSelection(target, -1);\n    },\n    ArrowRight: (event, target, instance)=>{\n        if (isElementType.isElementType(target, 'input', {\n            type: 'radio'\n        })) {\n            return ()=>radio.walkRadio(instance, target, 1);\n        }\n        return ()=>moveSelection.moveSelection(target, 1);\n    },\n    ArrowUp: (event, target, instance)=>{\n        /* istanbul ignore else */ if (isElementType.isElementType(target, 'input', {\n            type: 'radio'\n        })) {\n            return ()=>radio.walkRadio(instance, target, 1);\n        }\n    },\n    Backspace: (event, target, instance)=>{\n        if (isEditable.isEditable(target)) {\n            return ()=>{\n                input.input(instance, target, '', 'deleteContentBackward');\n            };\n        }\n    },\n    Delete: (event, target, instance)=>{\n        if (isEditable.isEditable(target)) {\n            return ()=>{\n                input.input(instance, target, '', 'deleteContentForward');\n            };\n        }\n    },\n    End: (event, target)=>{\n        if (isElementType.isElementType(target, [\n            'input',\n            'textarea'\n        ]) || isContentEditable.isContentEditable(target)) {\n            return ()=>{\n                var _getValueOrTextContent;\n                var _getValueOrTextContent_length;\n                const newPos = (_getValueOrTextContent_length = (_getValueOrTextContent = getValueOrTextContent.getValueOrTextContent(target)) === null || _getValueOrTextContent === void 0 ? void 0 : _getValueOrTextContent.length) !== null && _getValueOrTextContent_length !== void 0 ? _getValueOrTextContent_length : /* istanbul ignore next */ 0;\n                setSelectionRange.setSelectionRange(target, newPos, newPos);\n            };\n        }\n    },\n    Home: (event, target)=>{\n        if (isElementType.isElementType(target, [\n            'input',\n            'textarea'\n        ]) || isContentEditable.isContentEditable(target)) {\n            return ()=>{\n                setSelectionRange.setSelectionRange(target, 0, 0);\n            };\n        }\n    },\n    PageDown: (event, target)=>{\n        if (isElementType.isElementType(target, [\n            'input'\n        ])) {\n            return ()=>{\n                const newPos = UI.getUIValue(target).length;\n                setSelectionRange.setSelectionRange(target, newPos, newPos);\n            };\n        }\n    },\n    PageUp: (event, target)=>{\n        if (isElementType.isElementType(target, [\n            'input'\n        ])) {\n            return ()=>{\n                setSelectionRange.setSelectionRange(target, 0, 0);\n            };\n        }\n    },\n    Tab: (event, target, instance)=>{\n        return ()=>{\n            const dest = getTabDestination.getTabDestination(target, instance.system.keyboard.modifiers.Shift);\n            focus.focusElement(dest);\n            if (selection.hasOwnSelection(dest)) {\n                UI.setUISelection(dest, {\n                    anchorOffset: 0,\n                    focusOffset: dest.value.length\n                });\n            }\n        };\n    }\n};\nconst combinationBehavior = (event, target, instance)=>{\n    if (event.code === 'KeyA' && instance.system.keyboard.modifiers.Control) {\n        return ()=>selectAll.selectAll(target);\n    }\n};\n"],"mappings":"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"}