6da4a1702d8596170e9b1ccfed18ddde
'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});
var buttons = require('./buttons.js');
var device = require('./device.js');
var mouse = require('./mouse.js');
var pointer = require('./pointer.js');
function _define_property(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }
  return obj;
}
class PointerHost {
  isKeyPressed(keyDef) {
    return this.devices.get(keyDef.pointerType).isPressed(keyDef);
  }
  async press(instance, keyDef, position) {
    const pointerName = this.getPointerName(keyDef);
    const pointer = keyDef.pointerType === 'touch' ? this.pointers.new(pointerName, keyDef).init(instance, position) : this.pointers.get(pointerName);
    // TODO: deprecate the following implicit setting of position
    pointer.position = position;
    if (pointer.pointerType !== 'touch') {
      this.mouse.position = position;
    }
    this.devices.get(keyDef.pointerType).addPressed(keyDef);
    this.buttons.down(keyDef);
    pointer.down(instance, keyDef);
    if (pointer.pointerType !== 'touch' && !pointer.isPrevented) {
      this.mouse.down(instance, keyDef, pointer);
    }
  }
  async move(instance, pointerName, position) {
    const pointer = this.pointers.get(pointerName);
    // In (some?) browsers this order of events can be observed.
    // This interweaving of events is probably unnecessary.
    // While the order of mouse (or pointer) events is defined per spec,
    // the order in which they interweave/follow on a user interaction depends on the implementation.
    const pointermove = pointer.move(instance, position);
    const mousemove = pointer.pointerType === 'touch' || pointer.isPrevented && pointer.isDown ? undefined : this.mouse.move(instance, position);
    pointermove === null || pointermove === void 0 ? void 0 : pointermove.leave();
    mousemove === null || mousemove === void 0 ? void 0 : mousemove.leave();
    pointermove === null || pointermove === void 0 ? void 0 : pointermove.enter();
    mousemove === null || mousemove === void 0 ? void 0 : mousemove.enter();
    pointermove === null || pointermove === void 0 ? void 0 : pointermove.move();
    mousemove === null || mousemove === void 0 ? void 0 : mousemove.move();
  }
  async release(instance, keyDef, position) {
    const device = this.devices.get(keyDef.pointerType);
    device.removePressed(keyDef);
    this.buttons.up(keyDef);
    const pointer = this.pointers.get(this.getPointerName(keyDef));
    // TODO: deprecate the following implicit setting of position
    pointer.position = position;
    if (pointer.pointerType !== 'touch') {
      this.mouse.position = position;
    }
    if (device.countPressed === 0) {
      pointer.up(instance, keyDef);
    }
    if (pointer.pointerType === 'touch') {
      pointer.release(instance);
    }
    if (!pointer.isPrevented) {
      if (pointer.pointerType === 'touch' && !pointer.isMultitouch) {
        const mousemove = this.mouse.move(instance, pointer.position);
        mousemove === null || mousemove === void 0 ? void 0 : mousemove.leave();
        mousemove === null || mousemove === void 0 ? void 0 : mousemove.enter();
        mousemove === null || mousemove === void 0 ? void 0 : mousemove.move();
        this.mouse.down(instance, keyDef, pointer);
      }
      if (!pointer.isMultitouch) {
        const mousemove = this.mouse.move(instance, pointer.position);
        mousemove === null || mousemove === void 0 ? void 0 : mousemove.leave();
        mousemove === null || mousemove === void 0 ? void 0 : mousemove.enter();
        mousemove === null || mousemove === void 0 ? void 0 : mousemove.move();
        this.mouse.up(instance, keyDef, pointer);
      }
    }
  }
  getPointerName(keyDef) {
    return keyDef.pointerType === 'touch' ? keyDef.name : keyDef.pointerType;
  }
  getPreviousPosition(pointerName) {
    return this.pointers.has(pointerName) ? this.pointers.get(pointerName).position : undefined;
  }
  resetClickCount() {
    this.mouse.resetClickCount();
  }
  getMouseTarget(instance) {
    var _this_mouse_position_target;
    return (_this_mouse_position_target = this.mouse.position.target) !== null && _this_mouse_position_target !== void 0 ? _this_mouse_position_target : instance.config.document.body;
  }
  setMousePosition(position) {
    this.mouse.position = position;
    this.pointers.get('mouse').position = position;
  }
  constructor(system) {
    _define_property(this, "system", void 0);
    _define_property(this, "mouse", void 0);
    _define_property(this, "buttons", void 0);
    _define_property(this, "devices", new class {
      get(k) {
        var
          // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition
          _this_registry, _k;
        var _;
        (_ = (_this_registry = this.registry)[_k = k]) !== null && _ !== void 0 ? _ : _this_registry[_k] = new device.Device();
        return this.registry[k];
      }
      constructor() {
        _define_property(this, "registry", {});
      }
    }());
    _define_property(this, "pointers", new class {
      new(pointerName, keyDef) {
        const isPrimary = keyDef.pointerType !== 'touch' || !Object.values(this.registry).some(p => p.pointerType === 'touch' && !p.isCancelled);
        if (!isPrimary) {
          Object.values(this.registry).forEach(p => {
            if (p.pointerType === keyDef.pointerType && !p.isCancelled) {
              p.isMultitouch = true;
            }
          });
        }
        this.registry[pointerName] = new pointer.Pointer({
          pointerId: this.nextId++,
          pointerType: keyDef.pointerType,
          isPrimary
        });
        return this.registry[pointerName];
      }
      get(pointerName) {
        if (!this.has(pointerName)) {
          throw new Error(`Trying to access pointer "${pointerName}" which does not exist.`);
        }
        return this.registry[pointerName];
      }
      has(pointerName) {
        return pointerName in this.registry;
      }
      constructor() {
        _define_property(this, "registry", {
          mouse: new pointer.Pointer({
            pointerId: 1,
            pointerType: 'mouse',
            isPrimary: true
          })
        });
        _define_property(this, "nextId", 2);
      }
    }());
    this.system = system;
    this.buttons = new buttons.Buttons();
    this.mouse = new mouse.Mouse();
  }
}
exports.PointerHost = PointerHost;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImJ1dHRvbnMiLCJyZXF1aXJlIiwiZGV2aWNlIiwibW91c2UiLCJwb2ludGVyIiwiX2RlZmluZV9wcm9wZXJ0eSIsIm9iaiIsImtleSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIlBvaW50ZXJIb3N0IiwiaXNLZXlQcmVzc2VkIiwia2V5RGVmIiwiZGV2aWNlcyIsImdldCIsInBvaW50ZXJUeXBlIiwiaXNQcmVzc2VkIiwicHJlc3MiLCJpbnN0YW5jZSIsInBvc2l0aW9uIiwicG9pbnRlck5hbWUiLCJnZXRQb2ludGVyTmFtZSIsInBvaW50ZXJzIiwibmV3IiwiaW5pdCIsImFkZFByZXNzZWQiLCJkb3duIiwiaXNQcmV2ZW50ZWQiLCJtb3ZlIiwicG9pbnRlcm1vdmUiLCJtb3VzZW1vdmUiLCJpc0Rvd24iLCJ1bmRlZmluZWQiLCJsZWF2ZSIsImVudGVyIiwicmVsZWFzZSIsInJlbW92ZVByZXNzZWQiLCJ1cCIsImNvdW50UHJlc3NlZCIsImlzTXVsdGl0b3VjaCIsIm5hbWUiLCJnZXRQcmV2aW91c1Bvc2l0aW9uIiwiaGFzIiwicmVzZXRDbGlja0NvdW50IiwiZ2V0TW91c2VUYXJnZXQiLCJfdGhpc19tb3VzZV9wb3NpdGlvbl90YXJnZXQiLCJ0YXJnZXQiLCJjb25maWciLCJkb2N1bWVudCIsImJvZHkiLCJzZXRNb3VzZVBvc2l0aW9uIiwiY29uc3RydWN0b3IiLCJzeXN0ZW0iLCJrIiwiX3RoaXNfcmVnaXN0cnkiLCJfayIsIl8iLCJyZWdpc3RyeSIsIkRldmljZSIsImlzUHJpbWFyeSIsInZhbHVlcyIsInNvbWUiLCJwIiwiaXNDYW5jZWxsZWQiLCJmb3JFYWNoIiwiUG9pbnRlciIsInBvaW50ZXJJZCIsIm5leHRJZCIsIkVycm9yIiwiQnV0dG9ucyIsIk1vdXNlIl0sInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG52YXIgYnV0dG9ucyA9IHJlcXVpcmUoJy4vYnV0dG9ucy5qcycpO1xudmFyIGRldmljZSA9IHJlcXVpcmUoJy4vZGV2aWNlLmpzJyk7XG52YXIgbW91c2UgPSByZXF1aXJlKCcuL21vdXNlLmpzJyk7XG52YXIgcG9pbnRlciA9IHJlcXVpcmUoJy4vcG9pbnRlci5qcycpO1xuXG5mdW5jdGlvbiBfZGVmaW5lX3Byb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICAgIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG9ialtrZXldID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG59XG5jbGFzcyBQb2ludGVySG9zdCB7XG4gICAgaXNLZXlQcmVzc2VkKGtleURlZikge1xuICAgICAgICByZXR1cm4gdGhpcy5kZXZpY2VzLmdldChrZXlEZWYucG9pbnRlclR5cGUpLmlzUHJlc3NlZChrZXlEZWYpO1xuICAgIH1cbiAgICBhc3luYyBwcmVzcyhpbnN0YW5jZSwga2V5RGVmLCBwb3NpdGlvbikge1xuICAgICAgICBjb25zdCBwb2ludGVyTmFtZSA9IHRoaXMuZ2V0UG9pbnRlck5hbWUoa2V5RGVmKTtcbiAgICAgICAgY29uc3QgcG9pbnRlciA9IGtleURlZi5wb2ludGVyVHlwZSA9PT0gJ3RvdWNoJyA/IHRoaXMucG9pbnRlcnMubmV3KHBvaW50ZXJOYW1lLCBrZXlEZWYpLmluaXQoaW5zdGFuY2UsIHBvc2l0aW9uKSA6IHRoaXMucG9pbnRlcnMuZ2V0KHBvaW50ZXJOYW1lKTtcbiAgICAgICAgLy8gVE9ETzogZGVwcmVjYXRlIHRoZSBmb2xsb3dpbmcgaW1wbGljaXQgc2V0dGluZyBvZiBwb3NpdGlvblxuICAgICAgICBwb2ludGVyLnBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgICAgIGlmIChwb2ludGVyLnBvaW50ZXJUeXBlICE9PSAndG91Y2gnKSB7XG4gICAgICAgICAgICB0aGlzLm1vdXNlLnBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZXZpY2VzLmdldChrZXlEZWYucG9pbnRlclR5cGUpLmFkZFByZXNzZWQoa2V5RGVmKTtcbiAgICAgICAgdGhpcy5idXR0b25zLmRvd24oa2V5RGVmKTtcbiAgICAgICAgcG9pbnRlci5kb3duKGluc3RhbmNlLCBrZXlEZWYpO1xuICAgICAgICBpZiAocG9pbnRlci5wb2ludGVyVHlwZSAhPT0gJ3RvdWNoJyAmJiAhcG9pbnRlci5pc1ByZXZlbnRlZCkge1xuICAgICAgICAgICAgdGhpcy5tb3VzZS5kb3duKGluc3RhbmNlLCBrZXlEZWYsIHBvaW50ZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIG1vdmUoaW5zdGFuY2UsIHBvaW50ZXJOYW1lLCBwb3NpdGlvbikge1xuICAgICAgICBjb25zdCBwb2ludGVyID0gdGhpcy5wb2ludGVycy5nZXQocG9pbnRlck5hbWUpO1xuICAgICAgICAvLyBJbiAoc29tZT8pIGJyb3dzZXJzIHRoaXMgb3JkZXIgb2YgZXZlbnRzIGNhbiBiZSBvYnNlcnZlZC5cbiAgICAgICAgLy8gVGhpcyBpbnRlcndlYXZpbmcgb2YgZXZlbnRzIGlzIHByb2JhYmx5IHVubmVjZXNzYXJ5LlxuICAgICAgICAvLyBXaGlsZSB0aGUgb3JkZXIgb2YgbW91c2UgKG9yIHBvaW50ZXIpIGV2ZW50cyBpcyBkZWZpbmVkIHBlciBzcGVjLFxuICAgICAgICAvLyB0aGUgb3JkZXIgaW4gd2hpY2ggdGhleSBpbnRlcndlYXZlL2ZvbGxvdyBvbiBhIHVzZXIgaW50ZXJhY3Rpb24gZGVwZW5kcyBvbiB0aGUgaW1wbGVtZW50YXRpb24uXG4gICAgICAgIGNvbnN0IHBvaW50ZXJtb3ZlID0gcG9pbnRlci5tb3ZlKGluc3RhbmNlLCBwb3NpdGlvbik7XG4gICAgICAgIGNvbnN0IG1vdXNlbW92ZSA9IHBvaW50ZXIucG9pbnRlclR5cGUgPT09ICd0b3VjaCcgfHwgcG9pbnRlci5pc1ByZXZlbnRlZCAmJiBwb2ludGVyLmlzRG93biA/IHVuZGVmaW5lZCA6IHRoaXMubW91c2UubW92ZShpbnN0YW5jZSwgcG9zaXRpb24pO1xuICAgICAgICBwb2ludGVybW92ZSA9PT0gbnVsbCB8fCBwb2ludGVybW92ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9pbnRlcm1vdmUubGVhdmUoKTtcbiAgICAgICAgbW91c2Vtb3ZlID09PSBudWxsIHx8IG1vdXNlbW92ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogbW91c2Vtb3ZlLmxlYXZlKCk7XG4gICAgICAgIHBvaW50ZXJtb3ZlID09PSBudWxsIHx8IHBvaW50ZXJtb3ZlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwb2ludGVybW92ZS5lbnRlcigpO1xuICAgICAgICBtb3VzZW1vdmUgPT09IG51bGwgfHwgbW91c2Vtb3ZlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtb3VzZW1vdmUuZW50ZXIoKTtcbiAgICAgICAgcG9pbnRlcm1vdmUgPT09IG51bGwgfHwgcG9pbnRlcm1vdmUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBvaW50ZXJtb3ZlLm1vdmUoKTtcbiAgICAgICAgbW91c2Vtb3ZlID09PSBudWxsIHx8IG1vdXNlbW92ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogbW91c2Vtb3ZlLm1vdmUoKTtcbiAgICB9XG4gICAgYXN5bmMgcmVsZWFzZShpbnN0YW5jZSwga2V5RGVmLCBwb3NpdGlvbikge1xuICAgICAgICBjb25zdCBkZXZpY2UgPSB0aGlzLmRldmljZXMuZ2V0KGtleURlZi5wb2ludGVyVHlwZSk7XG4gICAgICAgIGRldmljZS5yZW1vdmVQcmVzc2VkKGtleURlZik7XG4gICAgICAgIHRoaXMuYnV0dG9ucy51cChrZXlEZWYpO1xuICAgICAgICBjb25zdCBwb2ludGVyID0gdGhpcy5wb2ludGVycy5nZXQodGhpcy5nZXRQb2ludGVyTmFtZShrZXlEZWYpKTtcbiAgICAgICAgLy8gVE9ETzogZGVwcmVjYXRlIHRoZSBmb2xsb3dpbmcgaW1wbGljaXQgc2V0dGluZyBvZiBwb3NpdGlvblxuICAgICAgICBwb2ludGVyLnBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgICAgIGlmIChwb2ludGVyLnBvaW50ZXJUeXBlICE9PSAndG91Y2gnKSB7XG4gICAgICAgICAgICB0aGlzLm1vdXNlLnBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRldmljZS5jb3VudFByZXNzZWQgPT09IDApIHtcbiAgICAgICAgICAgIHBvaW50ZXIudXAoaW5zdGFuY2UsIGtleURlZik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvaW50ZXIucG9pbnRlclR5cGUgPT09ICd0b3VjaCcpIHtcbiAgICAgICAgICAgIHBvaW50ZXIucmVsZWFzZShpbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFwb2ludGVyLmlzUHJldmVudGVkKSB7XG4gICAgICAgICAgICBpZiAocG9pbnRlci5wb2ludGVyVHlwZSA9PT0gJ3RvdWNoJyAmJiAhcG9pbnRlci5pc011bHRpdG91Y2gpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtb3VzZW1vdmUgPSB0aGlzLm1vdXNlLm1vdmUoaW5zdGFuY2UsIHBvaW50ZXIucG9zaXRpb24pO1xuICAgICAgICAgICAgICAgIG1vdXNlbW92ZSA9PT0gbnVsbCB8fCBtb3VzZW1vdmUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1vdXNlbW92ZS5sZWF2ZSgpO1xuICAgICAgICAgICAgICAgIG1vdXNlbW92ZSA9PT0gbnVsbCB8fCBtb3VzZW1vdmUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1vdXNlbW92ZS5lbnRlcigpO1xuICAgICAgICAgICAgICAgIG1vdXNlbW92ZSA9PT0gbnVsbCB8fCBtb3VzZW1vdmUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1vdXNlbW92ZS5tb3ZlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3VzZS5kb3duKGluc3RhbmNlLCBrZXlEZWYsIHBvaW50ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFwb2ludGVyLmlzTXVsdGl0b3VjaCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vdXNlbW92ZSA9IHRoaXMubW91c2UubW92ZShpbnN0YW5jZSwgcG9pbnRlci5wb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgbW91c2Vtb3ZlID09PSBudWxsIHx8IG1vdXNlbW92ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogbW91c2Vtb3ZlLmxlYXZlKCk7XG4gICAgICAgICAgICAgICAgbW91c2Vtb3ZlID09PSBudWxsIHx8IG1vdXNlbW92ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogbW91c2Vtb3ZlLmVudGVyKCk7XG4gICAgICAgICAgICAgICAgbW91c2Vtb3ZlID09PSBudWxsIHx8IG1vdXNlbW92ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogbW91c2Vtb3ZlLm1vdmUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdXNlLnVwKGluc3RhbmNlLCBrZXlEZWYsIHBvaW50ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGdldFBvaW50ZXJOYW1lKGtleURlZikge1xuICAgICAgICByZXR1cm4ga2V5RGVmLnBvaW50ZXJUeXBlID09PSAndG91Y2gnID8ga2V5RGVmLm5hbWUgOiBrZXlEZWYucG9pbnRlclR5cGU7XG4gICAgfVxuICAgIGdldFByZXZpb3VzUG9zaXRpb24ocG9pbnRlck5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9pbnRlcnMuaGFzKHBvaW50ZXJOYW1lKSA/IHRoaXMucG9pbnRlcnMuZ2V0KHBvaW50ZXJOYW1lKS5wb3NpdGlvbiA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmVzZXRDbGlja0NvdW50KCkge1xuICAgICAgICB0aGlzLm1vdXNlLnJlc2V0Q2xpY2tDb3VudCgpO1xuICAgIH1cbiAgICBnZXRNb3VzZVRhcmdldChpbnN0YW5jZSkge1xuICAgICAgICB2YXIgX3RoaXNfbW91c2VfcG9zaXRpb25fdGFyZ2V0O1xuICAgICAgICByZXR1cm4gKF90aGlzX21vdXNlX3Bvc2l0aW9uX3RhcmdldCA9IHRoaXMubW91c2UucG9zaXRpb24udGFyZ2V0KSAhPT0gbnVsbCAmJiBfdGhpc19tb3VzZV9wb3NpdGlvbl90YXJnZXQgIT09IHZvaWQgMCA/IF90aGlzX21vdXNlX3Bvc2l0aW9uX3RhcmdldCA6IGluc3RhbmNlLmNvbmZpZy5kb2N1bWVudC5ib2R5O1xuICAgIH1cbiAgICBzZXRNb3VzZVBvc2l0aW9uKHBvc2l0aW9uKSB7XG4gICAgICAgIHRoaXMubW91c2UucG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICAgICAgdGhpcy5wb2ludGVycy5nZXQoJ21vdXNlJykucG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICB9XG4gICAgY29uc3RydWN0b3Ioc3lzdGVtKXtcbiAgICAgICAgX2RlZmluZV9wcm9wZXJ0eSh0aGlzLCBcInN5c3RlbVwiLCB2b2lkIDApO1xuICAgICAgICBfZGVmaW5lX3Byb3BlcnR5KHRoaXMsIFwibW91c2VcIiwgdm9pZCAwKTtcbiAgICAgICAgX2RlZmluZV9wcm9wZXJ0eSh0aGlzLCBcImJ1dHRvbnNcIiwgdm9pZCAwKTtcbiAgICAgICAgX2RlZmluZV9wcm9wZXJ0eSh0aGlzLCBcImRldmljZXNcIiwgbmV3IGNsYXNzIHtcbiAgICAgICAgICAgIGdldChrKSB7XG4gICAgICAgICAgICAgICAgdmFyIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5uZWNlc3NhcnktY29uZGl0aW9uXG4gICAgICAgICAgICAgICAgX3RoaXNfcmVnaXN0cnksIF9rO1xuICAgICAgICAgICAgICAgIHZhciBfO1xuICAgICAgICAgICAgICAgIChfID0gKF90aGlzX3JlZ2lzdHJ5ID0gdGhpcy5yZWdpc3RyeSlbX2sgPSBrXSkgIT09IG51bGwgJiYgXyAhPT0gdm9pZCAwID8gXyA6IF90aGlzX3JlZ2lzdHJ5W19rXSA9IG5ldyBkZXZpY2UuRGV2aWNlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0cnlba107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdHJ1Y3Rvcigpe1xuICAgICAgICAgICAgICAgIF9kZWZpbmVfcHJvcGVydHkodGhpcywgXCJyZWdpc3RyeVwiLCB7fSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0oKSk7XG4gICAgICAgIF9kZWZpbmVfcHJvcGVydHkodGhpcywgXCJwb2ludGVyc1wiLCBuZXcgY2xhc3Mge1xuICAgICAgICAgICAgbmV3KHBvaW50ZXJOYW1lLCBrZXlEZWYpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpc1ByaW1hcnkgPSBrZXlEZWYucG9pbnRlclR5cGUgIT09ICd0b3VjaCcgfHwgIU9iamVjdC52YWx1ZXModGhpcy5yZWdpc3RyeSkuc29tZSgocCk9PnAucG9pbnRlclR5cGUgPT09ICd0b3VjaCcgJiYgIXAuaXNDYW5jZWxsZWQpO1xuICAgICAgICAgICAgICAgIGlmICghaXNQcmltYXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC52YWx1ZXModGhpcy5yZWdpc3RyeSkuZm9yRWFjaCgocCk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwLnBvaW50ZXJUeXBlID09PSBrZXlEZWYucG9pbnRlclR5cGUgJiYgIXAuaXNDYW5jZWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLmlzTXVsdGl0b3VjaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdHJ5W3BvaW50ZXJOYW1lXSA9IG5ldyBwb2ludGVyLlBvaW50ZXIoe1xuICAgICAgICAgICAgICAgICAgICBwb2ludGVySWQ6IHRoaXMubmV4dElkKyssXG4gICAgICAgICAgICAgICAgICAgIHBvaW50ZXJUeXBlOiBrZXlEZWYucG9pbnRlclR5cGUsXG4gICAgICAgICAgICAgICAgICAgIGlzUHJpbWFyeVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdHJ5W3BvaW50ZXJOYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdldChwb2ludGVyTmFtZSkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5oYXMocG9pbnRlck5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVHJ5aW5nIHRvIGFjY2VzcyBwb2ludGVyIFwiJHtwb2ludGVyTmFtZX1cIiB3aGljaCBkb2VzIG5vdCBleGlzdC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0cnlbcG9pbnRlck5hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGFzKHBvaW50ZXJOYW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBvaW50ZXJOYW1lIGluIHRoaXMucmVnaXN0cnk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdHJ1Y3Rvcigpe1xuICAgICAgICAgICAgICAgIF9kZWZpbmVfcHJvcGVydHkodGhpcywgXCJyZWdpc3RyeVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIG1vdXNlOiBuZXcgcG9pbnRlci5Qb2ludGVyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50ZXJJZDogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50ZXJUeXBlOiAnbW91c2UnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNQcmltYXJ5OiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgX2RlZmluZV9wcm9wZXJ0eSh0aGlzLCBcIm5leHRJZFwiLCAyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSgpKTtcbiAgICAgICAgdGhpcy5zeXN0ZW0gPSBzeXN0ZW07XG4gICAgICAgIHRoaXMuYnV0dG9ucyA9IG5ldyBidXR0b25zLkJ1dHRvbnMoKTtcbiAgICAgICAgdGhpcy5tb3VzZSA9IG5ldyBtb3VzZS5Nb3VzZSgpO1xuICAgIH1cbn1cblxuZXhwb3J0cy5Qb2ludGVySG9zdCA9IFBvaW50ZXJIb3N0O1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUVaQSxNQUFNLENBQUNDLGNBQWMsQ0FBQ0MsT0FBTyxFQUFFLFlBQVksRUFBRTtFQUFFQyxLQUFLLEVBQUU7QUFBSyxDQUFDLENBQUM7QUFFN0QsSUFBSUMsT0FBTyxHQUFHQyxPQUFPLENBQUMsY0FBYyxDQUFDO0FBQ3JDLElBQUlDLE1BQU0sR0FBR0QsT0FBTyxDQUFDLGFBQWEsQ0FBQztBQUNuQyxJQUFJRSxLQUFLLEdBQUdGLE9BQU8sQ0FBQyxZQUFZLENBQUM7QUFDakMsSUFBSUcsT0FBTyxHQUFHSCxPQUFPLENBQUMsY0FBYyxDQUFDO0FBRXJDLFNBQVNJLGdCQUFnQkEsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVSLEtBQUssRUFBRTtFQUN2QyxJQUFJUSxHQUFHLElBQUlELEdBQUcsRUFBRTtJQUNaVixNQUFNLENBQUNDLGNBQWMsQ0FBQ1MsR0FBRyxFQUFFQyxHQUFHLEVBQUU7TUFDNUJSLEtBQUssRUFBRUEsS0FBSztNQUNaUyxVQUFVLEVBQUUsSUFBSTtNQUNoQkMsWUFBWSxFQUFFLElBQUk7TUFDbEJDLFFBQVEsRUFBRTtJQUNkLENBQUMsQ0FBQztFQUNOLENBQUMsTUFBTTtJQUNISixHQUFHLENBQUNDLEdBQUcsQ0FBQyxHQUFHUixLQUFLO0VBQ3BCO0VBQ0EsT0FBT08sR0FBRztBQUNkO0FBQ0EsTUFBTUssV0FBVyxDQUFDO0VBQ2RDLFlBQVlBLENBQUNDLE1BQU0sRUFBRTtJQUNqQixPQUFPLElBQUksQ0FBQ0MsT0FBTyxDQUFDQyxHQUFHLENBQUNGLE1BQU0sQ0FBQ0csV0FBVyxDQUFDLENBQUNDLFNBQVMsQ0FBQ0osTUFBTSxDQUFDO0VBQ2pFO0VBQ0EsTUFBTUssS0FBS0EsQ0FBQ0MsUUFBUSxFQUFFTixNQUFNLEVBQUVPLFFBQVEsRUFBRTtJQUNwQyxNQUFNQyxXQUFXLEdBQUcsSUFBSSxDQUFDQyxjQUFjLENBQUNULE1BQU0sQ0FBQztJQUMvQyxNQUFNVCxPQUFPLEdBQUdTLE1BQU0sQ0FBQ0csV0FBVyxLQUFLLE9BQU8sR0FBRyxJQUFJLENBQUNPLFFBQVEsQ0FBQ0MsR0FBRyxDQUFDSCxXQUFXLEVBQUVSLE1BQU0sQ0FBQyxDQUFDWSxJQUFJLENBQUNOLFFBQVEsRUFBRUMsUUFBUSxDQUFDLEdBQUcsSUFBSSxDQUFDRyxRQUFRLENBQUNSLEdBQUcsQ0FBQ00sV0FBVyxDQUFDO0lBQ2pKO0lBQ0FqQixPQUFPLENBQUNnQixRQUFRLEdBQUdBLFFBQVE7SUFDM0IsSUFBSWhCLE9BQU8sQ0FBQ1ksV0FBVyxLQUFLLE9BQU8sRUFBRTtNQUNqQyxJQUFJLENBQUNiLEtBQUssQ0FBQ2lCLFFBQVEsR0FBR0EsUUFBUTtJQUNsQztJQUNBLElBQUksQ0FBQ04sT0FBTyxDQUFDQyxHQUFHLENBQUNGLE1BQU0sQ0FBQ0csV0FBVyxDQUFDLENBQUNVLFVBQVUsQ0FBQ2IsTUFBTSxDQUFDO0lBQ3ZELElBQUksQ0FBQ2IsT0FBTyxDQUFDMkIsSUFBSSxDQUFDZCxNQUFNLENBQUM7SUFDekJULE9BQU8sQ0FBQ3VCLElBQUksQ0FBQ1IsUUFBUSxFQUFFTixNQUFNLENBQUM7SUFDOUIsSUFBSVQsT0FBTyxDQUFDWSxXQUFXLEtBQUssT0FBTyxJQUFJLENBQUNaLE9BQU8sQ0FBQ3dCLFdBQVcsRUFBRTtNQUN6RCxJQUFJLENBQUN6QixLQUFLLENBQUN3QixJQUFJLENBQUNSLFFBQVEsRUFBRU4sTUFBTSxFQUFFVCxPQUFPLENBQUM7SUFDOUM7RUFDSjtFQUNBLE1BQU15QixJQUFJQSxDQUFDVixRQUFRLEVBQUVFLFdBQVcsRUFBRUQsUUFBUSxFQUFFO0lBQ3hDLE1BQU1oQixPQUFPLEdBQUcsSUFBSSxDQUFDbUIsUUFBUSxDQUFDUixHQUFHLENBQUNNLFdBQVcsQ0FBQztJQUM5QztJQUNBO0lBQ0E7SUFDQTtJQUNBLE1BQU1TLFdBQVcsR0FBRzFCLE9BQU8sQ0FBQ3lCLElBQUksQ0FBQ1YsUUFBUSxFQUFFQyxRQUFRLENBQUM7SUFDcEQsTUFBTVcsU0FBUyxHQUFHM0IsT0FBTyxDQUFDWSxXQUFXLEtBQUssT0FBTyxJQUFJWixPQUFPLENBQUN3QixXQUFXLElBQUl4QixPQUFPLENBQUM0QixNQUFNLEdBQUdDLFNBQVMsR0FBRyxJQUFJLENBQUM5QixLQUFLLENBQUMwQixJQUFJLENBQUNWLFFBQVEsRUFBRUMsUUFBUSxDQUFDO0lBQzVJVSxXQUFXLEtBQUssSUFBSSxJQUFJQSxXQUFXLEtBQUssS0FBSyxDQUFDLEdBQUcsS0FBSyxDQUFDLEdBQUdBLFdBQVcsQ0FBQ0ksS0FBSyxDQUFDLENBQUM7SUFDN0VILFNBQVMsS0FBSyxJQUFJLElBQUlBLFNBQVMsS0FBSyxLQUFLLENBQUMsR0FBRyxLQUFLLENBQUMsR0FBR0EsU0FBUyxDQUFDRyxLQUFLLENBQUMsQ0FBQztJQUN2RUosV0FBVyxLQUFLLElBQUksSUFBSUEsV0FBVyxLQUFLLEtBQUssQ0FBQyxHQUFHLEtBQUssQ0FBQyxHQUFHQSxXQUFXLENBQUNLLEtBQUssQ0FBQyxDQUFDO0lBQzdFSixTQUFTLEtBQUssSUFBSSxJQUFJQSxTQUFTLEtBQUssS0FBSyxDQUFDLEdBQUcsS0FBSyxDQUFDLEdBQUdBLFNBQVMsQ0FBQ0ksS0FBSyxDQUFDLENBQUM7SUFDdkVMLFdBQVcsS0FBSyxJQUFJLElBQUlBLFdBQVcsS0FBSyxLQUFLLENBQUMsR0FBRyxLQUFLLENBQUMsR0FBR0EsV0FBVyxDQUFDRCxJQUFJLENBQUMsQ0FBQztJQUM1RUUsU0FBUyxLQUFLLElBQUksSUFBSUEsU0FBUyxLQUFLLEtBQUssQ0FBQyxHQUFHLEtBQUssQ0FBQyxHQUFHQSxTQUFTLENBQUNGLElBQUksQ0FBQyxDQUFDO0VBQzFFO0VBQ0EsTUFBTU8sT0FBT0EsQ0FBQ2pCLFFBQVEsRUFBRU4sTUFBTSxFQUFFTyxRQUFRLEVBQUU7SUFDdEMsTUFBTWxCLE1BQU0sR0FBRyxJQUFJLENBQUNZLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRixNQUFNLENBQUNHLFdBQVcsQ0FBQztJQUNuRGQsTUFBTSxDQUFDbUMsYUFBYSxDQUFDeEIsTUFBTSxDQUFDO0lBQzVCLElBQUksQ0FBQ2IsT0FBTyxDQUFDc0MsRUFBRSxDQUFDekIsTUFBTSxDQUFDO0lBQ3ZCLE1BQU1ULE9BQU8sR0FBRyxJQUFJLENBQUNtQixRQUFRLENBQUNSLEdBQUcsQ0FBQyxJQUFJLENBQUNPLGNBQWMsQ0FBQ1QsTUFBTSxDQUFDLENBQUM7SUFDOUQ7SUFDQVQsT0FBTyxDQUFDZ0IsUUFBUSxHQUFHQSxRQUFRO0lBQzNCLElBQUloQixPQUFPLENBQUNZLFdBQVcsS0FBSyxPQUFPLEVBQUU7TUFDakMsSUFBSSxDQUFDYixLQUFLLENBQUNpQixRQUFRLEdBQUdBLFFBQVE7SUFDbEM7SUFDQSxJQUFJbEIsTUFBTSxDQUFDcUMsWUFBWSxLQUFLLENBQUMsRUFBRTtNQUMzQm5DLE9BQU8sQ0FBQ2tDLEVBQUUsQ0FBQ25CLFFBQVEsRUFBRU4sTUFBTSxDQUFDO0lBQ2hDO0lBQ0EsSUFBSVQsT0FBTyxDQUFDWSxXQUFXLEtBQUssT0FBTyxFQUFFO01BQ2pDWixPQUFPLENBQUNnQyxPQUFPLENBQUNqQixRQUFRLENBQUM7SUFDN0I7SUFDQSxJQUFJLENBQUNmLE9BQU8sQ0FBQ3dCLFdBQVcsRUFBRTtNQUN0QixJQUFJeEIsT0FBTyxDQUFDWSxXQUFXLEtBQUssT0FBTyxJQUFJLENBQUNaLE9BQU8sQ0FBQ29DLFlBQVksRUFBRTtRQUMxRCxNQUFNVCxTQUFTLEdBQUcsSUFBSSxDQUFDNUIsS0FBSyxDQUFDMEIsSUFBSSxDQUFDVixRQUFRLEVBQUVmLE9BQU8sQ0FBQ2dCLFFBQVEsQ0FBQztRQUM3RFcsU0FBUyxLQUFLLElBQUksSUFBSUEsU0FBUyxLQUFLLEtBQUssQ0FBQyxHQUFHLEtBQUssQ0FBQyxHQUFHQSxTQUFTLENBQUNHLEtBQUssQ0FBQyxDQUFDO1FBQ3ZFSCxTQUFTLEtBQUssSUFBSSxJQUFJQSxTQUFTLEtBQUssS0FBSyxDQUFDLEdBQUcsS0FBSyxDQUFDLEdBQUdBLFNBQVMsQ0FBQ0ksS0FBSyxDQUFDLENBQUM7UUFDdkVKLFNBQVMsS0FBSyxJQUFJLElBQUlBLFNBQVMsS0FBSyxLQUFLLENBQUMsR0FBRyxLQUFLLENBQUMsR0FBR0EsU0FBUyxDQUFDRixJQUFJLENBQUMsQ0FBQztRQUN0RSxJQUFJLENBQUMxQixLQUFLLENBQUN3QixJQUFJLENBQUNSLFFBQVEsRUFBRU4sTUFBTSxFQUFFVCxPQUFPLENBQUM7TUFDOUM7TUFDQSxJQUFJLENBQUNBLE9BQU8sQ0FBQ29DLFlBQVksRUFBRTtRQUN2QixNQUFNVCxTQUFTLEdBQUcsSUFBSSxDQUFDNUIsS0FBSyxDQUFDMEIsSUFBSSxDQUFDVixRQUFRLEVBQUVmLE9BQU8sQ0FBQ2dCLFFBQVEsQ0FBQztRQUM3RFcsU0FBUyxLQUFLLElBQUksSUFBSUEsU0FBUyxLQUFLLEtBQUssQ0FBQyxHQUFHLEtBQUssQ0FBQyxHQUFHQSxTQUFTLENBQUNHLEtBQUssQ0FBQyxDQUFDO1FBQ3ZFSCxTQUFTLEtBQUssSUFBSSxJQUFJQSxTQUFTLEtBQUssS0FBSyxDQUFDLEdBQUcsS0FBSyxDQUFDLEdBQUdBLFNBQVMsQ0FBQ0ksS0FBSyxDQUFDLENBQUM7UUFDdkVKLFNBQVMsS0FBSyxJQUFJLElBQUlBLFNBQVMsS0FBSyxLQUFLLENBQUMsR0FBRyxLQUFLLENBQUMsR0FBR0EsU0FBUyxDQUFDRixJQUFJLENBQUMsQ0FBQztRQUN0RSxJQUFJLENBQUMxQixLQUFLLENBQUNtQyxFQUFFLENBQUNuQixRQUFRLEVBQUVOLE1BQU0sRUFBRVQsT0FBTyxDQUFDO01BQzVDO0lBQ0o7RUFDSjtFQUNBa0IsY0FBY0EsQ0FBQ1QsTUFBTSxFQUFFO0lBQ25CLE9BQU9BLE1BQU0sQ0FBQ0csV0FBVyxLQUFLLE9BQU8sR0FBR0gsTUFBTSxDQUFDNEIsSUFBSSxHQUFHNUIsTUFBTSxDQUFDRyxXQUFXO0VBQzVFO0VBQ0EwQixtQkFBbUJBLENBQUNyQixXQUFXLEVBQUU7SUFDN0IsT0FBTyxJQUFJLENBQUNFLFFBQVEsQ0FBQ29CLEdBQUcsQ0FBQ3RCLFdBQVcsQ0FBQyxHQUFHLElBQUksQ0FBQ0UsUUFBUSxDQUFDUixHQUFHLENBQUNNLFdBQVcsQ0FBQyxDQUFDRCxRQUFRLEdBQUdhLFNBQVM7RUFDL0Y7RUFDQVcsZUFBZUEsQ0FBQSxFQUFHO0lBQ2QsSUFBSSxDQUFDekMsS0FBSyxDQUFDeUMsZUFBZSxDQUFDLENBQUM7RUFDaEM7RUFDQUMsY0FBY0EsQ0FBQzFCLFFBQVEsRUFBRTtJQUNyQixJQUFJMkIsMkJBQTJCO0lBQy9CLE9BQU8sQ0FBQ0EsMkJBQTJCLEdBQUcsSUFBSSxDQUFDM0MsS0FBSyxDQUFDaUIsUUFBUSxDQUFDMkIsTUFBTSxNQUFNLElBQUksSUFBSUQsMkJBQTJCLEtBQUssS0FBSyxDQUFDLEdBQUdBLDJCQUEyQixHQUFHM0IsUUFBUSxDQUFDNkIsTUFBTSxDQUFDQyxRQUFRLENBQUNDLElBQUk7RUFDdEw7RUFDQUMsZ0JBQWdCQSxDQUFDL0IsUUFBUSxFQUFFO0lBQ3ZCLElBQUksQ0FBQ2pCLEtBQUssQ0FBQ2lCLFFBQVEsR0FBR0EsUUFBUTtJQUM5QixJQUFJLENBQUNHLFFBQVEsQ0FBQ1IsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDSyxRQUFRLEdBQUdBLFFBQVE7RUFDbEQ7RUFDQWdDLFdBQVdBLENBQUNDLE1BQU0sRUFBQztJQUNmaEQsZ0JBQWdCLENBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUN4Q0EsZ0JBQWdCLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxLQUFLLENBQUMsQ0FBQztJQUN2Q0EsZ0JBQWdCLENBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUN6Q0EsZ0JBQWdCLENBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRSxJQUFJLE1BQU07TUFDeENVLEdBQUdBLENBQUN1QyxDQUFDLEVBQUU7UUFDSDtVQUFJO1VBQ0pDLGNBQWMsRUFBRUMsRUFBRTtRQUNsQixJQUFJQyxDQUFDO1FBQ0wsQ0FBQ0EsQ0FBQyxHQUFHLENBQUNGLGNBQWMsR0FBRyxJQUFJLENBQUNHLFFBQVEsRUFBRUYsRUFBRSxHQUFHRixDQUFDLENBQUMsTUFBTSxJQUFJLElBQUlHLENBQUMsS0FBSyxLQUFLLENBQUMsR0FBR0EsQ0FBQyxHQUFHRixjQUFjLENBQUNDLEVBQUUsQ0FBQyxHQUFHLElBQUl0RCxNQUFNLENBQUN5RCxNQUFNLENBQUMsQ0FBQztRQUN0SCxPQUFPLElBQUksQ0FBQ0QsUUFBUSxDQUFDSixDQUFDLENBQUM7TUFDM0I7TUFDQUYsV0FBV0EsQ0FBQSxFQUFFO1FBQ1QvQyxnQkFBZ0IsQ0FBQyxJQUFJLEVBQUUsVUFBVSxFQUFFLENBQUMsQ0FBQyxDQUFDO01BQzFDO0lBQ0osQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNKQSxnQkFBZ0IsQ0FBQyxJQUFJLEVBQUUsVUFBVSxFQUFFLElBQUksTUFBTTtNQUN6Q21CLEdBQUdBLENBQUNILFdBQVcsRUFBRVIsTUFBTSxFQUFFO1FBQ3JCLE1BQU0rQyxTQUFTLEdBQUcvQyxNQUFNLENBQUNHLFdBQVcsS0FBSyxPQUFPLElBQUksQ0FBQ3BCLE1BQU0sQ0FBQ2lFLE1BQU0sQ0FBQyxJQUFJLENBQUNILFFBQVEsQ0FBQyxDQUFDSSxJQUFJLENBQUVDLENBQUMsSUFBR0EsQ0FBQyxDQUFDL0MsV0FBVyxLQUFLLE9BQU8sSUFBSSxDQUFDK0MsQ0FBQyxDQUFDQyxXQUFXLENBQUM7UUFDeEksSUFBSSxDQUFDSixTQUFTLEVBQUU7VUFDWmhFLE1BQU0sQ0FBQ2lFLE1BQU0sQ0FBQyxJQUFJLENBQUNILFFBQVEsQ0FBQyxDQUFDTyxPQUFPLENBQUVGLENBQUMsSUFBRztZQUN0QyxJQUFJQSxDQUFDLENBQUMvQyxXQUFXLEtBQUtILE1BQU0sQ0FBQ0csV0FBVyxJQUFJLENBQUMrQyxDQUFDLENBQUNDLFdBQVcsRUFBRTtjQUN4REQsQ0FBQyxDQUFDdkIsWUFBWSxHQUFHLElBQUk7WUFDekI7VUFDSixDQUFDLENBQUM7UUFDTjtRQUNBLElBQUksQ0FBQ2tCLFFBQVEsQ0FBQ3JDLFdBQVcsQ0FBQyxHQUFHLElBQUlqQixPQUFPLENBQUM4RCxPQUFPLENBQUM7VUFDN0NDLFNBQVMsRUFBRSxJQUFJLENBQUNDLE1BQU0sRUFBRTtVQUN4QnBELFdBQVcsRUFBRUgsTUFBTSxDQUFDRyxXQUFXO1VBQy9CNEM7UUFDSixDQUFDLENBQUM7UUFDRixPQUFPLElBQUksQ0FBQ0YsUUFBUSxDQUFDckMsV0FBVyxDQUFDO01BQ3JDO01BQ0FOLEdBQUdBLENBQUNNLFdBQVcsRUFBRTtRQUNiLElBQUksQ0FBQyxJQUFJLENBQUNzQixHQUFHLENBQUN0QixXQUFXLENBQUMsRUFBRTtVQUN4QixNQUFNLElBQUlnRCxLQUFLLENBQUUsNkJBQTRCaEQsV0FBWSx5QkFBd0IsQ0FBQztRQUN0RjtRQUNBLE9BQU8sSUFBSSxDQUFDcUMsUUFBUSxDQUFDckMsV0FBVyxDQUFDO01BQ3JDO01BQ0FzQixHQUFHQSxDQUFDdEIsV0FBVyxFQUFFO1FBQ2IsT0FBT0EsV0FBVyxJQUFJLElBQUksQ0FBQ3FDLFFBQVE7TUFDdkM7TUFDQU4sV0FBV0EsQ0FBQSxFQUFFO1FBQ1QvQyxnQkFBZ0IsQ0FBQyxJQUFJLEVBQUUsVUFBVSxFQUFFO1VBQy9CRixLQUFLLEVBQUUsSUFBSUMsT0FBTyxDQUFDOEQsT0FBTyxDQUFDO1lBQ3ZCQyxTQUFTLEVBQUUsQ0FBQztZQUNabkQsV0FBVyxFQUFFLE9BQU87WUFDcEI0QyxTQUFTLEVBQUU7VUFDZixDQUFDO1FBQ0wsQ0FBQyxDQUFDO1FBQ0Z2RCxnQkFBZ0IsQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQztNQUN2QztJQUNKLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDSixJQUFJLENBQUNnRCxNQUFNLEdBQUdBLE1BQU07SUFDcEIsSUFBSSxDQUFDckQsT0FBTyxHQUFHLElBQUlBLE9BQU8sQ0FBQ3NFLE9BQU8sQ0FBQyxDQUFDO0lBQ3BDLElBQUksQ0FBQ25FLEtBQUssR0FBRyxJQUFJQSxLQUFLLENBQUNvRSxLQUFLLENBQUMsQ0FBQztFQUNsQztBQUNKO0FBRUF6RSxPQUFPLENBQUNhLFdBQVcsR0FBR0EsV0FBVyJ9