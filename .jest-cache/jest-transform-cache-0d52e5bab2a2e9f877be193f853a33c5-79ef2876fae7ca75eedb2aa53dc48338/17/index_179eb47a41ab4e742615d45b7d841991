9584ad8d2ffb83ae09aa806866471a4b
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = highlight;
exports.shouldHighlight = shouldHighlight;
var _jsTokens = require("js-tokens");
var _helperValidatorIdentifier = require("@babel/helper-validator-identifier");
var _chalk = _interopRequireWildcard(require("chalk"), true);
function _getRequireWildcardCache(e) {
  if ("function" != typeof WeakMap) return null;
  var r = new WeakMap(),
    t = new WeakMap();
  return (_getRequireWildcardCache = function (e) {
    return e ? t : r;
  })(e);
}
function _interopRequireWildcard(e, r) {
  if (!r && e && e.__esModule) return e;
  if (null === e || "object" != typeof e && "function" != typeof e) return {
    default: e
  };
  var t = _getRequireWildcardCache(r);
  if (t && t.has(e)) return t.get(e);
  var n = {
      __proto__: null
    },
    a = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var u in e) if ("default" !== u && Object.prototype.hasOwnProperty.call(e, u)) {
    var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;
    i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];
  }
  return n.default = e, t && t.set(e, n), n;
}
const sometimesKeywords = new Set(["as", "async", "from", "get", "of", "set"]);
function getDefs(chalk) {
  return {
    keyword: chalk.cyan,
    capitalized: chalk.yellow,
    jsxIdentifier: chalk.yellow,
    punctuator: chalk.yellow,
    number: chalk.magenta,
    string: chalk.green,
    regex: chalk.magenta,
    comment: chalk.grey,
    invalid: chalk.white.bgRed.bold
  };
}
const NEWLINE = /\r\n|[\n\r\u2028\u2029]/;
const BRACKET = /^[()[\]{}]$/;
let tokenize;
{
  const JSX_TAG = /^[a-z][\w-]*$/i;
  const getTokenType = function (token, offset, text) {
    if (token.type === "name") {
      if ((0, _helperValidatorIdentifier.isKeyword)(token.value) || (0, _helperValidatorIdentifier.isStrictReservedWord)(token.value, true) || sometimesKeywords.has(token.value)) {
        return "keyword";
      }
      if (JSX_TAG.test(token.value) && (text[offset - 1] === "<" || text.slice(offset - 2, offset) == "</")) {
        return "jsxIdentifier";
      }
      if (token.value[0] !== token.value[0].toLowerCase()) {
        return "capitalized";
      }
    }
    if (token.type === "punctuator" && BRACKET.test(token.value)) {
      return "bracket";
    }
    if (token.type === "invalid" && (token.value === "@" || token.value === "#")) {
      return "punctuator";
    }
    return token.type;
  };
  tokenize = function* (text) {
    let match;
    while (match = _jsTokens.default.exec(text)) {
      const token = _jsTokens.matchToToken(match);
      yield {
        type: getTokenType(token, match.index, text),
        value: token.value
      };
    }
  };
}
function highlightTokens(defs, text) {
  let highlighted = "";
  for (const {
    type,
    value
  } of tokenize(text)) {
    const colorize = defs[type];
    if (colorize) {
      highlighted += value.split(NEWLINE).map(str => colorize(str)).join("\n");
    } else {
      highlighted += value;
    }
  }
  return highlighted;
}
function shouldHighlight(options) {
  return _chalk.default.level > 0 || options.forceColor;
}
let chalkWithForcedColor = undefined;
function getChalk(forceColor) {
  if (forceColor) {
    var _chalkWithForcedColor;
    (_chalkWithForcedColor = chalkWithForcedColor) != null ? _chalkWithForcedColor : chalkWithForcedColor = new _chalk.default.constructor({
      enabled: true,
      level: 1
    });
    return chalkWithForcedColor;
  }
  return _chalk.default;
}
{
  exports.getChalk = options => getChalk(options.forceColor);
}
function highlight(code, options = {}) {
  if (code !== "" && shouldHighlight(options)) {
    const defs = getDefs(getChalk(options.forceColor));
    return highlightTokens(defs, code);
  } else {
    return code;
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNUb2tlbnMiLCJyZXF1aXJlIiwiX2hlbHBlclZhbGlkYXRvcklkZW50aWZpZXIiLCJfY2hhbGsiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsImUiLCJXZWFrTWFwIiwiciIsInQiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImhhcyIsImdldCIsIm4iLCJfX3Byb3RvX18iLCJhIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJ1IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaSIsInNldCIsInNvbWV0aW1lc0tleXdvcmRzIiwiU2V0IiwiZ2V0RGVmcyIsImNoYWxrIiwia2V5d29yZCIsImN5YW4iLCJjYXBpdGFsaXplZCIsInllbGxvdyIsImpzeElkZW50aWZpZXIiLCJwdW5jdHVhdG9yIiwibnVtYmVyIiwibWFnZW50YSIsInN0cmluZyIsImdyZWVuIiwicmVnZXgiLCJjb21tZW50IiwiZ3JleSIsImludmFsaWQiLCJ3aGl0ZSIsImJnUmVkIiwiYm9sZCIsIk5FV0xJTkUiLCJCUkFDS0VUIiwidG9rZW5pemUiLCJKU1hfVEFHIiwiZ2V0VG9rZW5UeXBlIiwidG9rZW4iLCJvZmZzZXQiLCJ0ZXh0IiwidHlwZSIsImlzS2V5d29yZCIsInZhbHVlIiwiaXNTdHJpY3RSZXNlcnZlZFdvcmQiLCJ0ZXN0Iiwic2xpY2UiLCJ0b0xvd2VyQ2FzZSIsIm1hdGNoIiwiZXhlYyIsIm1hdGNoVG9Ub2tlbiIsImluZGV4IiwiaGlnaGxpZ2h0VG9rZW5zIiwiZGVmcyIsImhpZ2hsaWdodGVkIiwiY29sb3JpemUiLCJzcGxpdCIsIm1hcCIsInN0ciIsImpvaW4iLCJzaG91bGRIaWdobGlnaHQiLCJvcHRpb25zIiwibGV2ZWwiLCJmb3JjZUNvbG9yIiwiY2hhbGtXaXRoRm9yY2VkQ29sb3IiLCJ1bmRlZmluZWQiLCJnZXRDaGFsayIsIl9jaGFsa1dpdGhGb3JjZWRDb2xvciIsImNvbnN0cnVjdG9yIiwiZW5hYmxlZCIsImV4cG9ydHMiLCJoaWdobGlnaHQiLCJjb2RlIl0sInNvdXJjZXMiOlsiLi4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi9saWIvdGhpcmQtcGFydHktbGlicy5kLnRzXCIgLz5cblxuaW1wb3J0IHR5cGUgeyBUb2tlbiBhcyBKU1Rva2VuLCBKU1hUb2tlbiB9IGZyb20gXCJqcy10b2tlbnNcIjtcbmltcG9ydCBqc1Rva2VucyBmcm9tIFwianMtdG9rZW5zXCI7XG5cbmltcG9ydCB7XG4gIGlzU3RyaWN0UmVzZXJ2ZWRXb3JkLFxuICBpc0tleXdvcmQsXG59IGZyb20gXCJAYmFiZWwvaGVscGVyLXZhbGlkYXRvci1pZGVudGlmaWVyXCI7XG5cbmltcG9ydCBjaGFsaywgeyBDaGFsayBhcyBDaGFsa0NsYXNzLCB0eXBlIENoYWxrSW5zdGFuY2UgYXMgQ2hhbGsgfSBmcm9tIFwiY2hhbGtcIjtcblxuLyoqXG4gKiBOYW1lcyB0aGF0IGFyZSBhbHdheXMgYWxsb3dlZCBhcyBpZGVudGlmaWVycywgYnV0IGFsc28gYXBwZWFyIGFzIGtleXdvcmRzXG4gKiB3aXRoaW4gY2VydGFpbiBzeW50YWN0aWMgcHJvZHVjdGlvbnMuXG4gKlxuICogaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1rZXl3b3Jkcy1hbmQtcmVzZXJ2ZWQtd29yZHNcbiAqXG4gKiBgdGFyZ2V0YCBoYXMgYmVlbiBvbWl0dGVkIHNpbmNlIGl0IGlzIHZlcnkgbGlrZWx5IGdvaW5nIHRvIGJlIGEgZmFsc2VcbiAqIHBvc2l0aXZlLlxuICovXG5jb25zdCBzb21ldGltZXNLZXl3b3JkcyA9IG5ldyBTZXQoW1wiYXNcIiwgXCJhc3luY1wiLCBcImZyb21cIiwgXCJnZXRcIiwgXCJvZlwiLCBcInNldFwiXSk7XG5cbnR5cGUgSW50ZXJuYWxUb2tlblR5cGUgPVxuICB8IFwia2V5d29yZFwiXG4gIHwgXCJjYXBpdGFsaXplZFwiXG4gIHwgXCJqc3hJZGVudGlmaWVyXCJcbiAgfCBcInB1bmN0dWF0b3JcIlxuICB8IFwibnVtYmVyXCJcbiAgfCBcInN0cmluZ1wiXG4gIHwgXCJyZWdleFwiXG4gIHwgXCJjb21tZW50XCJcbiAgfCBcImludmFsaWRcIjtcblxudHlwZSBUb2tlbiA9IHtcbiAgdHlwZTogSW50ZXJuYWxUb2tlblR5cGUgfCBcInVuY29sb3JlZFwiO1xuICB2YWx1ZTogc3RyaW5nO1xufTtcbi8qKlxuICogQ2hhbGsgc3R5bGVzIGZvciB0b2tlbiB0eXBlcy5cbiAqL1xuZnVuY3Rpb24gZ2V0RGVmcyhjaGFsazogQ2hhbGspOiBSZWNvcmQ8SW50ZXJuYWxUb2tlblR5cGUsIENoYWxrPiB7XG4gIHJldHVybiB7XG4gICAga2V5d29yZDogY2hhbGsuY3lhbixcbiAgICBjYXBpdGFsaXplZDogY2hhbGsueWVsbG93LFxuICAgIGpzeElkZW50aWZpZXI6IGNoYWxrLnllbGxvdyxcbiAgICBwdW5jdHVhdG9yOiBjaGFsay55ZWxsb3csXG4gICAgbnVtYmVyOiBjaGFsay5tYWdlbnRhLFxuICAgIHN0cmluZzogY2hhbGsuZ3JlZW4sXG4gICAgcmVnZXg6IGNoYWxrLm1hZ2VudGEsXG4gICAgY29tbWVudDogY2hhbGsuZ3JleSxcbiAgICBpbnZhbGlkOiBjaGFsay53aGl0ZS5iZ1JlZC5ib2xkLFxuICB9O1xufVxuXG4vKipcbiAqIFJlZ0V4cCB0byB0ZXN0IGZvciBuZXdsaW5lcyBpbiB0ZXJtaW5hbC5cbiAqL1xuY29uc3QgTkVXTElORSA9IC9cXHJcXG58W1xcblxcclxcdTIwMjhcXHUyMDI5XS87XG5cbi8qKlxuICogUmVnRXhwIHRvIHRlc3QgZm9yIHRoZSB0aHJlZSB0eXBlcyBvZiBicmFja2V0cy5cbiAqL1xuY29uc3QgQlJBQ0tFVCA9IC9eWygpW1xcXXt9XSQvO1xuXG5sZXQgdG9rZW5pemU6IChcbiAgdGV4dDogc3RyaW5nLFxuKSA9PiBHZW5lcmF0b3I8eyB0eXBlOiBJbnRlcm5hbFRva2VuVHlwZSB8IFwidW5jb2xvcmVkXCI7IHZhbHVlOiBzdHJpbmcgfT47XG5cbmlmIChwcm9jZXNzLmVudi5CQUJFTF84X0JSRUFLSU5HKSB7XG4gIC8qKlxuICAgKiBHZXQgdGhlIHR5cGUgb2YgdG9rZW4sIHNwZWNpZnlpbmcgcHVuY3R1YXRvciB0eXBlLlxuICAgKi9cbiAgY29uc3QgZ2V0VG9rZW5UeXBlID0gZnVuY3Rpb24gKFxuICAgIHRva2VuOiBKU1Rva2VuIHwgSlNYVG9rZW4sXG4gICk6IEludGVybmFsVG9rZW5UeXBlIHwgXCJ1bmNvbG9yZWRcIiB7XG4gICAgaWYgKHRva2VuLnR5cGUgPT09IFwiSWRlbnRpZmllck5hbWVcIikge1xuICAgICAgaWYgKFxuICAgICAgICBpc0tleXdvcmQodG9rZW4udmFsdWUpIHx8XG4gICAgICAgIGlzU3RyaWN0UmVzZXJ2ZWRXb3JkKHRva2VuLnZhbHVlLCB0cnVlKSB8fFxuICAgICAgICBzb21ldGltZXNLZXl3b3Jkcy5oYXModG9rZW4udmFsdWUpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIFwia2V5d29yZFwiO1xuICAgICAgfVxuXG4gICAgICBpZiAodG9rZW4udmFsdWVbMF0gIT09IHRva2VuLnZhbHVlWzBdLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgcmV0dXJuIFwiY2FwaXRhbGl6ZWRcIjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodG9rZW4udHlwZSA9PT0gXCJQdW5jdHVhdG9yXCIgJiYgQlJBQ0tFVC50ZXN0KHRva2VuLnZhbHVlKSkge1xuICAgICAgcmV0dXJuIFwidW5jb2xvcmVkXCI7XG4gICAgfVxuXG4gICAgaWYgKHRva2VuLnR5cGUgPT09IFwiSW52YWxpZFwiICYmIHRva2VuLnZhbHVlID09PSBcIkBcIikge1xuICAgICAgcmV0dXJuIFwicHVuY3R1YXRvclwiO1xuICAgIH1cblxuICAgIHN3aXRjaCAodG9rZW4udHlwZSkge1xuICAgICAgY2FzZSBcIk51bWVyaWNMaXRlcmFsXCI6XG4gICAgICAgIHJldHVybiBcIm51bWJlclwiO1xuXG4gICAgICBjYXNlIFwiU3RyaW5nTGl0ZXJhbFwiOlxuICAgICAgY2FzZSBcIkpTWFN0cmluZ1wiOlxuICAgICAgY2FzZSBcIk5vU3Vic3RpdHV0aW9uVGVtcGxhdGVcIjpcbiAgICAgICAgcmV0dXJuIFwic3RyaW5nXCI7XG5cbiAgICAgIGNhc2UgXCJSZWd1bGFyRXhwcmVzc2lvbkxpdGVyYWxcIjpcbiAgICAgICAgcmV0dXJuIFwicmVnZXhcIjtcblxuICAgICAgY2FzZSBcIlB1bmN0dWF0b3JcIjpcbiAgICAgIGNhc2UgXCJKU1hQdW5jdHVhdG9yXCI6XG4gICAgICAgIHJldHVybiBcInB1bmN0dWF0b3JcIjtcblxuICAgICAgY2FzZSBcIk11bHRpTGluZUNvbW1lbnRcIjpcbiAgICAgIGNhc2UgXCJTaW5nbGVMaW5lQ29tbWVudFwiOlxuICAgICAgICByZXR1cm4gXCJjb21tZW50XCI7XG5cbiAgICAgIGNhc2UgXCJJbnZhbGlkXCI6XG4gICAgICBjYXNlIFwiSlNYSW52YWxpZFwiOlxuICAgICAgICByZXR1cm4gXCJpbnZhbGlkXCI7XG5cbiAgICAgIGNhc2UgXCJKU1hJZGVudGlmaWVyXCI6XG4gICAgICAgIHJldHVybiBcImpzeElkZW50aWZpZXJcIjtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIFwidW5jb2xvcmVkXCI7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBUdXJuIGEgc3RyaW5nIG9mIEpTIGludG8gYW4gYXJyYXkgb2Ygb2JqZWN0cy5cbiAgICovXG4gIHRva2VuaXplID0gZnVuY3Rpb24qICh0ZXh0OiBzdHJpbmcpOiBHZW5lcmF0b3I8VG9rZW4+IHtcbiAgICBmb3IgKGNvbnN0IHRva2VuIG9mIGpzVG9rZW5zKHRleHQsIHsganN4OiB0cnVlIH0pKSB7XG4gICAgICBzd2l0Y2ggKHRva2VuLnR5cGUpIHtcbiAgICAgICAgY2FzZSBcIlRlbXBsYXRlSGVhZFwiOlxuICAgICAgICAgIHlpZWxkIHsgdHlwZTogXCJzdHJpbmdcIiwgdmFsdWU6IHRva2VuLnZhbHVlLnNsaWNlKDAsIC0yKSB9O1xuICAgICAgICAgIHlpZWxkIHsgdHlwZTogXCJwdW5jdHVhdG9yXCIsIHZhbHVlOiBcIiR7XCIgfTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiVGVtcGxhdGVNaWRkbGVcIjpcbiAgICAgICAgICB5aWVsZCB7IHR5cGU6IFwicHVuY3R1YXRvclwiLCB2YWx1ZTogXCJ9XCIgfTtcbiAgICAgICAgICB5aWVsZCB7IHR5cGU6IFwic3RyaW5nXCIsIHZhbHVlOiB0b2tlbi52YWx1ZS5zbGljZSgxLCAtMikgfTtcbiAgICAgICAgICB5aWVsZCB7IHR5cGU6IFwicHVuY3R1YXRvclwiLCB2YWx1ZTogXCIke1wiIH07XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcIlRlbXBsYXRlVGFpbFwiOlxuICAgICAgICAgIHlpZWxkIHsgdHlwZTogXCJwdW5jdHVhdG9yXCIsIHZhbHVlOiBcIn1cIiB9O1xuICAgICAgICAgIHlpZWxkIHsgdHlwZTogXCJzdHJpbmdcIiwgdmFsdWU6IHRva2VuLnZhbHVlLnNsaWNlKDEpIH07XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB5aWVsZCB7XG4gICAgICAgICAgICB0eXBlOiBnZXRUb2tlblR5cGUodG9rZW4pLFxuICAgICAgICAgICAgdmFsdWU6IHRva2VuLnZhbHVlLFxuICAgICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICB9O1xufSBlbHNlIHtcbiAgLyoqXG4gICAqIFJlZ0V4cCB0byB0ZXN0IGZvciB3aGF0IHNlZW1zIHRvIGJlIGEgSlNYIHRhZyBuYW1lLlxuICAgKi9cbiAgY29uc3QgSlNYX1RBRyA9IC9eW2Etel1bXFx3LV0qJC9pO1xuXG4gIC8vIFRoZSB0b2tlbiBoZXJlIGlzIGRlZmluZWQgaW4ganMtdG9rZW5zQDQuIEhvd2V2ZXIgd2UgZG9uJ3QgYm90aGVyXG4gIC8vIHR5cGluZyBpdCBzaW5jZSB0aGUgd2hvbGUgYmxvY2sgd2lsbCBiZSByZW1vdmVkIGluIEJhYmVsIDhcbiAgY29uc3QgZ2V0VG9rZW5UeXBlID0gZnVuY3Rpb24gKHRva2VuOiBhbnksIG9mZnNldDogbnVtYmVyLCB0ZXh0OiBzdHJpbmcpIHtcbiAgICBpZiAodG9rZW4udHlwZSA9PT0gXCJuYW1lXCIpIHtcbiAgICAgIGlmIChcbiAgICAgICAgaXNLZXl3b3JkKHRva2VuLnZhbHVlKSB8fFxuICAgICAgICBpc1N0cmljdFJlc2VydmVkV29yZCh0b2tlbi52YWx1ZSwgdHJ1ZSkgfHxcbiAgICAgICAgc29tZXRpbWVzS2V5d29yZHMuaGFzKHRva2VuLnZhbHVlKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBcImtleXdvcmRcIjtcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICBKU1hfVEFHLnRlc3QodG9rZW4udmFsdWUpICYmXG4gICAgICAgICh0ZXh0W29mZnNldCAtIDFdID09PSBcIjxcIiB8fCB0ZXh0LnNsaWNlKG9mZnNldCAtIDIsIG9mZnNldCkgPT0gXCI8L1wiKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBcImpzeElkZW50aWZpZXJcIjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRva2VuLnZhbHVlWzBdICE9PSB0b2tlbi52YWx1ZVswXS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgIHJldHVybiBcImNhcGl0YWxpemVkXCI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRva2VuLnR5cGUgPT09IFwicHVuY3R1YXRvclwiICYmIEJSQUNLRVQudGVzdCh0b2tlbi52YWx1ZSkpIHtcbiAgICAgIHJldHVybiBcImJyYWNrZXRcIjtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICB0b2tlbi50eXBlID09PSBcImludmFsaWRcIiAmJlxuICAgICAgKHRva2VuLnZhbHVlID09PSBcIkBcIiB8fCB0b2tlbi52YWx1ZSA9PT0gXCIjXCIpXG4gICAgKSB7XG4gICAgICByZXR1cm4gXCJwdW5jdHVhdG9yXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRva2VuLnR5cGU7XG4gIH07XG5cbiAgdG9rZW5pemUgPSBmdW5jdGlvbiogKHRleHQ6IHN0cmluZykge1xuICAgIGxldCBtYXRjaDtcbiAgICB3aGlsZSAoKG1hdGNoID0gKGpzVG9rZW5zIGFzIGFueSkuZGVmYXVsdC5leGVjKHRleHQpKSkge1xuICAgICAgY29uc3QgdG9rZW4gPSAoanNUb2tlbnMgYXMgYW55KS5tYXRjaFRvVG9rZW4obWF0Y2gpO1xuXG4gICAgICB5aWVsZCB7XG4gICAgICAgIHR5cGU6IGdldFRva2VuVHlwZSh0b2tlbiwgbWF0Y2guaW5kZXgsIHRleHQpLFxuICAgICAgICB2YWx1ZTogdG9rZW4udmFsdWUsXG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBIaWdobGlnaHQgYHRleHRgIHVzaW5nIHRoZSB0b2tlbiBkZWZpbml0aW9ucyBpbiBgZGVmc2AuXG4gKi9cbmZ1bmN0aW9uIGhpZ2hsaWdodFRva2VucyhkZWZzOiBSZWNvcmQ8c3RyaW5nLCBDaGFsaz4sIHRleHQ6IHN0cmluZykge1xuICBsZXQgaGlnaGxpZ2h0ZWQgPSBcIlwiO1xuXG4gIGZvciAoY29uc3QgeyB0eXBlLCB2YWx1ZSB9IG9mIHRva2VuaXplKHRleHQpKSB7XG4gICAgY29uc3QgY29sb3JpemUgPSBkZWZzW3R5cGVdO1xuICAgIGlmIChjb2xvcml6ZSkge1xuICAgICAgaGlnaGxpZ2h0ZWQgKz0gdmFsdWVcbiAgICAgICAgLnNwbGl0KE5FV0xJTkUpXG4gICAgICAgIC5tYXAoc3RyID0+IGNvbG9yaXplKHN0cikpXG4gICAgICAgIC5qb2luKFwiXFxuXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBoaWdobGlnaHRlZCArPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gaGlnaGxpZ2h0ZWQ7XG59XG5cbi8qKlxuICogSGlnaGxpZ2h0IGB0ZXh0YCB1c2luZyB0aGUgdG9rZW4gZGVmaW5pdGlvbnMgaW4gYGRlZnNgLlxuICovXG5cbnR5cGUgT3B0aW9ucyA9IHtcbiAgZm9yY2VDb2xvcj86IGJvb2xlYW47XG59O1xuXG4vKipcbiAqIFdoZXRoZXIgdGhlIGNvZGUgc2hvdWxkIGJlIGhpZ2hsaWdodGVkIGdpdmVuIHRoZSBwYXNzZWQgb3B0aW9ucy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZEhpZ2hsaWdodChvcHRpb25zOiBPcHRpb25zKTogYm9vbGVhbiB7XG4gIHJldHVybiBjaGFsay5sZXZlbCA+IDAgfHwgb3B0aW9ucy5mb3JjZUNvbG9yO1xufVxuXG5sZXQgY2hhbGtXaXRoRm9yY2VkQ29sb3I6IENoYWxrID0gdW5kZWZpbmVkO1xuZnVuY3Rpb24gZ2V0Q2hhbGsoZm9yY2VDb2xvcjogYm9vbGVhbikge1xuICBpZiAoZm9yY2VDb2xvcikge1xuICAgIGNoYWxrV2l0aEZvcmNlZENvbG9yID8/PSBwcm9jZXNzLmVudi5CQUJFTF84X0JSRUFLSU5HXG4gICAgICA/IG5ldyBDaGFsa0NsYXNzKHsgbGV2ZWw6IDEgfSlcbiAgICAgIDogLy8gQHRzLWV4cGVjdC1lcnJvciAuSW5zdGFuY2Ugd2FzIC5jb25zdHJ1Y3RvciBpbiBjaGFsayAyXG4gICAgICAgIG5ldyBjaGFsay5jb25zdHJ1Y3Rvcih7IGVuYWJsZWQ6IHRydWUsIGxldmVsOiAxIH0pO1xuICAgIHJldHVybiBjaGFsa1dpdGhGb3JjZWRDb2xvcjtcbiAgfVxuICByZXR1cm4gY2hhbGs7XG59XG5pZiAoIXByb2Nlc3MuZW52LkJBQkVMXzhfQlJFQUtJTkcgJiYgIVVTRV9FU00pIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xuICBleHBvcnRzLmdldENoYWxrID0gKG9wdGlvbnM6IE9wdGlvbnMpID0+IGdldENoYWxrKG9wdGlvbnMuZm9yY2VDb2xvcik7XG59XG5cbi8qKlxuICogSGlnaGxpZ2h0IGBjb2RlYC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaGlnaGxpZ2h0KGNvZGU6IHN0cmluZywgb3B0aW9uczogT3B0aW9ucyA9IHt9KTogc3RyaW5nIHtcbiAgaWYgKGNvZGUgIT09IFwiXCIgJiYgc2hvdWxkSGlnaGxpZ2h0KG9wdGlvbnMpKSB7XG4gICAgY29uc3QgZGVmcyA9IGdldERlZnMoZ2V0Q2hhbGsob3B0aW9ucy5mb3JjZUNvbG9yKSk7XG4gICAgcmV0dXJuIGhpZ2hsaWdodFRva2VucyhkZWZzLCBjb2RlKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gY29kZTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBR0EsSUFBQUEsU0FBQSxHQUFBQyxPQUFBO0FBRUEsSUFBQUMsMEJBQUEsR0FBQUQsT0FBQTtBQUtBLElBQUFFLE1BQUEsR0FBQUMsdUJBQUEsQ0FBQUgsT0FBQTtBQUFnRixTQUFBSSx5QkFBQUMsQ0FBQTtFQUFBLHlCQUFBQyxPQUFBO0VBQUEsSUFBQUMsQ0FBQSxPQUFBRCxPQUFBO0lBQUFFLENBQUEsT0FBQUYsT0FBQTtFQUFBLFFBQUFGLHdCQUFBLFlBQUFBLENBQUFDLENBQUE7SUFBQSxPQUFBQSxDQUFBLEdBQUFHLENBQUEsR0FBQUQsQ0FBQTtFQUFBLEdBQUFGLENBQUE7QUFBQTtBQUFBLFNBQUFGLHdCQUFBRSxDQUFBLEVBQUFFLENBQUE7RUFBQSxLQUFBQSxDQUFBLElBQUFGLENBQUEsSUFBQUEsQ0FBQSxDQUFBSSxVQUFBLFNBQUFKLENBQUE7RUFBQSxhQUFBQSxDQUFBLHVCQUFBQSxDQUFBLHlCQUFBQSxDQUFBO0lBQUFLLE9BQUEsRUFBQUw7RUFBQTtFQUFBLElBQUFHLENBQUEsR0FBQUosd0JBQUEsQ0FBQUcsQ0FBQTtFQUFBLElBQUFDLENBQUEsSUFBQUEsQ0FBQSxDQUFBRyxHQUFBLENBQUFOLENBQUEsVUFBQUcsQ0FBQSxDQUFBSSxHQUFBLENBQUFQLENBQUE7RUFBQSxJQUFBUSxDQUFBO01BQUFDLFNBQUE7SUFBQTtJQUFBQyxDQUFBLEdBQUFDLE1BQUEsQ0FBQUMsY0FBQSxJQUFBRCxNQUFBLENBQUFFLHdCQUFBO0VBQUEsU0FBQUMsQ0FBQSxJQUFB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