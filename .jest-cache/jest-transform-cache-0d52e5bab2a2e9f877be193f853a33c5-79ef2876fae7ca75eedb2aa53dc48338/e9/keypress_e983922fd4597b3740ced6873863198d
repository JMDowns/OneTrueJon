ff7cad7c36a784567a4be601686664c4
'use strict';

require('../../utils/click/isClickableInput.js');
require('../../utils/dataTransfer/Clipboard.js');
var isContentEditable = require('../../utils/edit/isContentEditable.js');
var isEditable = require('../../utils/edit/isEditable.js');
require('../../utils/edit/maxLength.js');
var isElementType = require('../../utils/misc/isElementType.js');
require('@testing-library/dom/dist/helpers.js');
require('../../utils/keyDef/readNextDescriptor.js');
require('../../utils/misc/level.js');
require('../../options.js');
var input = require('../input.js');
var registry = require('./registry.js');
registry.behavior.keypress = (event, target, instance) => {
  if (event.key === 'Enter') {
    if (isElementType.isElementType(target, 'button') || isElementType.isElementType(target, 'input') && ClickInputOnEnter.includes(target.type) || isElementType.isElementType(target, 'a') && Boolean(target.href)) {
      return () => {
        instance.dispatchUIEvent(target, 'click');
      };
    } else if (isElementType.isElementType(target, 'input')) {
      const form = target.form;
      const submit = form === null || form === void 0 ? void 0 : form.querySelector('input[type="submit"], button:not([type]), button[type="submit"]');
      if (submit) {
        return () => instance.dispatchUIEvent(submit, 'click');
      } else if (form && SubmitSingleInputOnEnter.includes(target.type) && form.querySelectorAll('input').length === 1) {
        return () => instance.dispatchUIEvent(form, 'submit');
      } else {
        return;
      }
    }
  }
  if (isEditable.isEditable(target)) {
    const inputType = event.key === 'Enter' ? isContentEditable.isContentEditable(target) && !instance.system.keyboard.modifiers.Shift ? 'insertParagraph' : 'insertLineBreak' : 'insertText';
    const inputData = event.key === 'Enter' ? '\n' : event.key;
    return () => input.input(instance, target, inputData, inputType);
  }
};
const ClickInputOnEnter = ['button', 'color', 'file', 'image', 'reset', 'submit'];
const SubmitSingleInputOnEnter = ['email', 'month', 'password', 'search', 'tel', 'text', 'url', 'week'];
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1aXJlIiwiaXNDb250ZW50RWRpdGFibGUiLCJpc0VkaXRhYmxlIiwiaXNFbGVtZW50VHlwZSIsImlucHV0IiwicmVnaXN0cnkiLCJiZWhhdmlvciIsImtleXByZXNzIiwiZXZlbnQiLCJ0YXJnZXQiLCJpbnN0YW5jZSIsImtleSIsIkNsaWNrSW5wdXRPbkVudGVyIiwiaW5jbHVkZXMiLCJ0eXBlIiwiQm9vbGVhbiIsImhyZWYiLCJkaXNwYXRjaFVJRXZlbnQiLCJmb3JtIiwic3VibWl0IiwicXVlcnlTZWxlY3RvciIsIlN1Ym1pdFNpbmdsZUlucHV0T25FbnRlciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJsZW5ndGgiLCJpbnB1dFR5cGUiLCJzeXN0ZW0iLCJrZXlib2FyZCIsIm1vZGlmaWVycyIsIlNoaWZ0IiwiaW5wdXREYXRhIl0sInNvdXJjZXMiOlsia2V5cHJlc3MuanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5yZXF1aXJlKCcuLi8uLi91dGlscy9jbGljay9pc0NsaWNrYWJsZUlucHV0LmpzJyk7XG5yZXF1aXJlKCcuLi8uLi91dGlscy9kYXRhVHJhbnNmZXIvQ2xpcGJvYXJkLmpzJyk7XG52YXIgaXNDb250ZW50RWRpdGFibGUgPSByZXF1aXJlKCcuLi8uLi91dGlscy9lZGl0L2lzQ29udGVudEVkaXRhYmxlLmpzJyk7XG52YXIgaXNFZGl0YWJsZSA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL2VkaXQvaXNFZGl0YWJsZS5qcycpO1xucmVxdWlyZSgnLi4vLi4vdXRpbHMvZWRpdC9tYXhMZW5ndGguanMnKTtcbnZhciBpc0VsZW1lbnRUeXBlID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvbWlzYy9pc0VsZW1lbnRUeXBlLmpzJyk7XG5yZXF1aXJlKCdAdGVzdGluZy1saWJyYXJ5L2RvbS9kaXN0L2hlbHBlcnMuanMnKTtcbnJlcXVpcmUoJy4uLy4uL3V0aWxzL2tleURlZi9yZWFkTmV4dERlc2NyaXB0b3IuanMnKTtcbnJlcXVpcmUoJy4uLy4uL3V0aWxzL21pc2MvbGV2ZWwuanMnKTtcbnJlcXVpcmUoJy4uLy4uL29wdGlvbnMuanMnKTtcbnZhciBpbnB1dCA9IHJlcXVpcmUoJy4uL2lucHV0LmpzJyk7XG52YXIgcmVnaXN0cnkgPSByZXF1aXJlKCcuL3JlZ2lzdHJ5LmpzJyk7XG5cbnJlZ2lzdHJ5LmJlaGF2aW9yLmtleXByZXNzID0gKGV2ZW50LCB0YXJnZXQsIGluc3RhbmNlKT0+e1xuICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgaWYgKGlzRWxlbWVudFR5cGUuaXNFbGVtZW50VHlwZSh0YXJnZXQsICdidXR0b24nKSB8fCBpc0VsZW1lbnRUeXBlLmlzRWxlbWVudFR5cGUodGFyZ2V0LCAnaW5wdXQnKSAmJiBDbGlja0lucHV0T25FbnRlci5pbmNsdWRlcyh0YXJnZXQudHlwZSkgfHwgaXNFbGVtZW50VHlwZS5pc0VsZW1lbnRUeXBlKHRhcmdldCwgJ2EnKSAmJiBCb29sZWFuKHRhcmdldC5ocmVmKSkge1xuICAgICAgICAgICAgcmV0dXJuICgpPT57XG4gICAgICAgICAgICAgICAgaW5zdGFuY2UuZGlzcGF0Y2hVSUV2ZW50KHRhcmdldCwgJ2NsaWNrJyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2UgaWYgKGlzRWxlbWVudFR5cGUuaXNFbGVtZW50VHlwZSh0YXJnZXQsICdpbnB1dCcpKSB7XG4gICAgICAgICAgICBjb25zdCBmb3JtID0gdGFyZ2V0LmZvcm07XG4gICAgICAgICAgICBjb25zdCBzdWJtaXQgPSBmb3JtID09PSBudWxsIHx8IGZvcm0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZvcm0ucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cInN1Ym1pdFwiXSwgYnV0dG9uOm5vdChbdHlwZV0pLCBidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpO1xuICAgICAgICAgICAgaWYgKHN1Ym1pdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAoKT0+aW5zdGFuY2UuZGlzcGF0Y2hVSUV2ZW50KHN1Ym1pdCwgJ2NsaWNrJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGZvcm0gJiYgU3VibWl0U2luZ2xlSW5wdXRPbkVudGVyLmluY2x1ZGVzKHRhcmdldC50eXBlKSAmJiBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0JykubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICgpPT5pbnN0YW5jZS5kaXNwYXRjaFVJRXZlbnQoZm9ybSwgJ3N1Ym1pdCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzRWRpdGFibGUuaXNFZGl0YWJsZSh0YXJnZXQpKSB7XG4gICAgICAgIGNvbnN0IGlucHV0VHlwZSA9IGV2ZW50LmtleSA9PT0gJ0VudGVyJyA/IGlzQ29udGVudEVkaXRhYmxlLmlzQ29udGVudEVkaXRhYmxlKHRhcmdldCkgJiYgIWluc3RhbmNlLnN5c3RlbS5rZXlib2FyZC5tb2RpZmllcnMuU2hpZnQgPyAnaW5zZXJ0UGFyYWdyYXBoJyA6ICdpbnNlcnRMaW5lQnJlYWsnIDogJ2luc2VydFRleHQnO1xuICAgICAgICBjb25zdCBpbnB1dERhdGEgPSBldmVudC5rZXkgPT09ICdFbnRlcicgPyAnXFxuJyA6IGV2ZW50LmtleTtcbiAgICAgICAgcmV0dXJuICgpPT5pbnB1dC5pbnB1dChpbnN0YW5jZSwgdGFyZ2V0LCBpbnB1dERhdGEsIGlucHV0VHlwZSk7XG4gICAgfVxufTtcbmNvbnN0IENsaWNrSW5wdXRPbkVudGVyID0gW1xuICAgICdidXR0b24nLFxuICAgICdjb2xvcicsXG4gICAgJ2ZpbGUnLFxuICAgICdpbWFnZScsXG4gICAgJ3Jlc2V0JyxcbiAgICAnc3VibWl0J1xuXTtcbmNvbnN0IFN1Ym1pdFNpbmdsZUlucHV0T25FbnRlciA9IFtcbiAgICAnZW1haWwnLFxuICAgICdtb250aCcsXG4gICAgJ3Bhc3N3b3JkJyxcbiAgICAnc2VhcmNoJyxcbiAgICAndGVsJyxcbiAgICAndGV4dCcsXG4gICAgJ3VybCcsXG4gICAgJ3dlZWsnXG5dO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUVaQSxPQUFPLENBQUMsdUNBQXVDLENBQUM7QUFDaERBLE9BQU8sQ0FBQyx1Q0FBdUMsQ0FBQztBQUNoRCxJQUFJQyxpQkFBaUIsR0FBR0QsT0FBTyxDQUFDLHVDQUF1QyxDQUFDO0FBQ3hFLElBQUlFLFVBQVUsR0FBR0YsT0FBTyxDQUFDLGdDQUFnQyxDQUFDO0FBQzFEQSxPQUFPLENBQUMsK0JBQStCLENBQUM7QUFDeEMsSUFBSUcsYUFBYSxHQUFHSCxPQUFPLENBQUMsbUNBQW1DLENBQUM7QUFDaEVBLE9BQU8sQ0FBQyxzQ0FBc0MsQ0FBQztBQUMvQ0EsT0FBTyxDQUFDLDBDQUEwQyxDQUFDO0FBQ25EQSxPQUFPLENBQUMsMkJBQTJCLENBQUM7QUFDcENBLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQztBQUMzQixJQUFJSSxLQUFLLEdBQUdKLE9BQU8sQ0FBQyxhQUFhLENBQUM7QUFDbEMsSUFBSUssUUFBUSxHQUFHTCxPQUFPLENBQUMsZUFBZSxDQUFDO0FBRXZDSyxRQUFRLENBQUNDLFFBQVEsQ0FBQ0MsUUFBUSxHQUFHLENBQUNDLEtBQUssRUFBRUMsTUFBTSxFQUFFQyxRQUFRLEtBQUc7RUFDcEQsSUFBSUYsS0FBSyxDQUFDRyxHQUFHLEtBQUssT0FBTyxFQUFFO0lBQ3ZCLElBQUlSLGFBQWEsQ0FBQ0EsYUFBYSxDQUFDTSxNQUFNLEVBQUUsUUFBUSxDQUFDLElBQUlOLGFBQWEsQ0FBQ0EsYUFBYSxDQUFDTSxNQUFNLEVBQUUsT0FBTyxDQUFDLElBQUlHLGlCQUFpQixDQUFDQyxRQUFRLENBQUNKLE1BQU0sQ0FBQ0ssSUFBSSxDQUFDLElBQUlYLGFBQWEsQ0FBQ0EsYUFBYSxDQUFDTSxNQUFNLEVBQUUsR0FBRyxDQUFDLElBQUlNLE9BQU8sQ0FBQ04sTUFBTSxDQUFDTyxJQUFJLENBQUMsRUFBRTtNQUM5TSxPQUFPLE1BQUk7UUFDUE4sUUFBUSxDQUFDTyxlQUFlLENBQUNSLE1BQU0sRUFBRSxPQUFPLENBQUM7TUFDN0MsQ0FBQztJQUNMLENBQUMsTUFBTSxJQUFJTixhQUFhLENBQUNBLGFBQWEsQ0FBQ00sTUFBTSxFQUFFLE9BQU8sQ0FBQyxFQUFFO01BQ3JELE1BQU1TLElBQUksR0FBR1QsTUFBTSxDQUFDUyxJQUFJO01BQ3hCLE1BQU1DLE1BQU0sR0FBR0QsSUFBSSxLQUFLLElBQUksSUFBSUEsSUFBSSxLQUFLLEtBQUssQ0FBQyxHQUFHLEtBQUssQ0FBQyxHQUFHQSxJQUFJLENBQUNFLGFBQWEsQ0FBQyxpRUFBaUUsQ0FBQztNQUNoSixJQUFJRCxNQUFNLEVBQUU7UUFDUixPQUFPLE1BQUlULFFBQVEsQ0FBQ08sZUFBZSxDQUFDRSxNQUFNLEVBQUUsT0FBTyxDQUFDO01BQ3hELENBQUMsTUFBTSxJQUFJRCxJQUFJLElBQUlHLHdCQUF3QixDQUFDUixRQUFRLENBQUNKLE1BQU0sQ0FBQ0ssSUFBSSxDQUFDLElBQUlJLElBQUksQ0FBQ0ksZ0JBQWdCLENBQUMsT0FBTyxDQUFDLENBQUNDLE1BQU0sS0FBSyxDQUFDLEVBQUU7UUFDOUcsT0FBTyxNQUFJYixRQUFRLENBQUNPLGVBQWUsQ0FBQ0MsSUFBSSxFQUFFLFFBQVEsQ0FBQztNQUN2RCxDQUFDLE1BQU07UUFDSDtNQUNKO0lBQ0o7RUFDSjtFQUNBLElBQUloQixVQUFVLENBQUNBLFVBQVUsQ0FBQ08sTUFBTSxDQUFDLEVBQUU7SUFDL0IsTUFBTWUsU0FBUyxHQUFHaEIsS0FBSyxDQUFDRyxHQUFHLEtBQUssT0FBTyxHQUFHVixpQkFBaUIsQ0FBQ0EsaUJBQWlCLENBQUNRLE1BQU0sQ0FBQyxJQUFJLENBQUNDLFFBQVEsQ0FBQ2UsTUFBTSxDQUFDQyxRQUFRLENBQUNDLFNBQVMsQ0FBQ0MsS0FBSyxHQUFHLGlCQUFpQixHQUFHLGlCQUFpQixHQUFHLFlBQVk7SUFDekwsTUFBTUMsU0FBUyxHQUFHckIsS0FBSyxDQUFDRyxHQUFHLEtBQUssT0FBTyxHQUFHLElBQUksR0FBR0gsS0FBSyxDQUFDRyxHQUFHO0lBQzFELE9BQU8sTUFBSVAsS0FBSyxDQUFDQSxLQUFLLENBQUNNLFFBQVEsRUFBRUQsTUFBTSxFQUFFb0IsU0FBUyxFQUFFTCxTQUFTLENBQUM7RUFDbEU7QUFDSixDQUFDO0FBQ0QsTUFBTVosaUJBQWlCLEdBQUcsQ0FDdEIsUUFBUSxFQUNSLE9BQU8sRUFDUCxNQUFNLEVBQ04sT0FBTyxFQUNQLE9BQU8sRUFDUCxRQUFRLENBQ1g7QUFDRCxNQUFNUyx3QkFBd0IsR0FBRyxDQUM3QixPQUFPLEVBQ1AsT0FBTyxFQUNQLFVBQVUsRUFDVixRQUFRLEVBQ1IsS0FBSyxFQUNMLE1BQU0sRUFDTixLQUFLLEVBQ0wsTUFBTSxDQUNUIn0=