2ec57333e3bd0dacdcab8fdbe0a4f441
'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});
require('../utils/click/isClickableInput.js');
require('../utils/dataTransfer/Clipboard.js');
require('../utils/edit/isEditable.js');
require('../utils/edit/maxLength.js');
var getActiveElement = require('../utils/focus/getActiveElement.js');
require('@testing-library/dom/dist/helpers.js');
require('../utils/keyDef/readNextDescriptor.js');
require('../utils/misc/level.js');
require('../options.js');
function _define_property(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }
  return obj;
}
exports.DOM_KEY_LOCATION = void 0;
(function (DOM_KEY_LOCATION) {
  DOM_KEY_LOCATION[DOM_KEY_LOCATION["STANDARD"] = 0] = "STANDARD";
  DOM_KEY_LOCATION[DOM_KEY_LOCATION["LEFT"] = 1] = "LEFT";
  DOM_KEY_LOCATION[DOM_KEY_LOCATION["RIGHT"] = 2] = "RIGHT";
  DOM_KEY_LOCATION[DOM_KEY_LOCATION["NUMPAD"] = 3] = "NUMPAD";
})(exports.DOM_KEY_LOCATION || (exports.DOM_KEY_LOCATION = {}));
const modifierKeys = ['Alt', 'AltGraph', 'Control', 'Fn', 'Meta', 'Shift', 'Symbol'];
function isModifierKey(key) {
  return modifierKeys.includes(key);
}
const modifierLocks = ['CapsLock', 'FnLock', 'NumLock', 'ScrollLock', 'SymbolLock'];
function isModifierLock(key) {
  return modifierLocks.includes(key);
}
class KeyboardHost {
  isKeyPressed(keyDef) {
    return !!this.pressed[String(keyDef.code)];
  }
  getPressedKeys() {
    return Object.values(this.pressed).map(p => p.keyDef);
  }
  /** Press a key */
  async keydown(instance, keyDef) {
    var
      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition
      _this_pressed, _code, _this_pressed_code;
    const key = String(keyDef.key);
    const code = String(keyDef.code);
    const target = getActiveElement.getActiveElementOrBody(instance.config.document);
    this.setKeydownTarget(target);
    var _;
    (_ = (_this_pressed = this.pressed)[_code = code]) !== null && _ !== void 0 ? _ : _this_pressed[_code] = {
      keyDef,
      unpreventedDefault: false
    };
    if (isModifierKey(key)) {
      this.modifiers[key] = true;
    }
    const unprevented = instance.dispatchUIEvent(target, 'keydown', {
      key,
      code
    });
    if (isModifierLock(key) && !this.modifiers[key]) {
      this.modifiers[key] = true;
      this.modifierLockStart[key] = true;
    }
    (_this_pressed_code = this.pressed[code]).unpreventedDefault || (_this_pressed_code.unpreventedDefault = unprevented);
    if (unprevented && this.hasKeyPress(key)) {
      instance.dispatchUIEvent(getActiveElement.getActiveElementOrBody(instance.config.document), 'keypress', {
        key,
        code,
        charCode: keyDef.key === 'Enter' ? 13 : String(keyDef.key).charCodeAt(0)
      });
    }
  }
  /** Release a key */
  async keyup(instance, keyDef) {
    const key = String(keyDef.key);
    const code = String(keyDef.code);
    const unprevented = this.pressed[code].unpreventedDefault;
    // eslint-disable-next-line @typescript-eslint/no-dynamic-delete
    delete this.pressed[code];
    if (isModifierKey(key) && !Object.values(this.pressed).find(p => p.keyDef.key === key)) {
      this.modifiers[key] = false;
    }
    instance.dispatchUIEvent(getActiveElement.getActiveElementOrBody(instance.config.document), 'keyup', {
      key,
      code
    }, !unprevented);
    if (isModifierLock(key) && this.modifiers[key]) {
      if (this.modifierLockStart[key]) {
        this.modifierLockStart[key] = false;
      } else {
        this.modifiers[key] = false;
      }
    }
  }
  setKeydownTarget(target) {
    if (target !== this.lastKeydownTarget) {
      this.carryChar = '';
    }
    this.lastKeydownTarget = target;
  }
  hasKeyPress(key) {
    return (key.length === 1 || key === 'Enter') && !this.modifiers.Control && !this.modifiers.Alt;
  }
  constructor(system) {
    _define_property(this, "system", void 0);
    _define_property(this, "modifiers", {
      Alt: false,
      AltGraph: false,
      CapsLock: false,
      Control: false,
      Fn: false,
      FnLock: false,
      Meta: false,
      NumLock: false,
      ScrollLock: false,
      Shift: false,
      Symbol: false,
      SymbolLock: false
    });
    _define_property(this, "pressed", {});
    _define_property(this, "carryChar", '');
    _define_property(this, "lastKeydownTarget", undefined);
    _define_property(this, "modifierLockStart", {});
    this.system = system;
  }
}
exports.KeyboardHost = KeyboardHost;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInJlcXVpcmUiLCJnZXRBY3RpdmVFbGVtZW50IiwiX2RlZmluZV9wcm9wZXJ0eSIsIm9iaiIsImtleSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIkRPTV9LRVlfTE9DQVRJT04iLCJtb2RpZmllcktleXMiLCJpc01vZGlmaWVyS2V5IiwiaW5jbHVkZXMiLCJtb2RpZmllckxvY2tzIiwiaXNNb2RpZmllckxvY2siLCJLZXlib2FyZEhvc3QiLCJpc0tleVByZXNzZWQiLCJrZXlEZWYiLCJwcmVzc2VkIiwiU3RyaW5nIiwiY29kZSIsImdldFByZXNzZWRLZXlzIiwidmFsdWVzIiwibWFwIiwicCIsImtleWRvd24iLCJpbnN0YW5jZSIsIl90aGlzX3ByZXNzZWQiLCJfY29kZSIsIl90aGlzX3ByZXNzZWRfY29kZSIsInRhcmdldCIsImdldEFjdGl2ZUVsZW1lbnRPckJvZHkiLCJjb25maWciLCJkb2N1bWVudCIsInNldEtleWRvd25UYXJnZXQiLCJfIiwidW5wcmV2ZW50ZWREZWZhdWx0IiwibW9kaWZpZXJzIiwidW5wcmV2ZW50ZWQiLCJkaXNwYXRjaFVJRXZlbnQiLCJtb2RpZmllckxvY2tTdGFydCIsImhhc0tleVByZXNzIiwiY2hhckNvZGUiLCJjaGFyQ29kZUF0Iiwia2V5dXAiLCJmaW5kIiwibGFzdEtleWRvd25UYXJnZXQiLCJjYXJyeUNoYXIiLCJsZW5ndGgiLCJDb250cm9sIiwiQWx0IiwiY29uc3RydWN0b3IiLCJzeXN0ZW0iLCJBbHRHcmFwaCIsIkNhcHNMb2NrIiwiRm4iLCJGbkxvY2siLCJNZXRhIiwiTnVtTG9jayIsIlNjcm9sbExvY2siLCJTaGlmdCIsIlN5bWJvbCIsIlN5bWJvbExvY2siLCJ1bmRlZmluZWQiXSwic291cmNlcyI6WyJrZXlib2FyZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbnJlcXVpcmUoJy4uL3V0aWxzL2NsaWNrL2lzQ2xpY2thYmxlSW5wdXQuanMnKTtcbnJlcXVpcmUoJy4uL3V0aWxzL2RhdGFUcmFuc2Zlci9DbGlwYm9hcmQuanMnKTtcbnJlcXVpcmUoJy4uL3V0aWxzL2VkaXQvaXNFZGl0YWJsZS5qcycpO1xucmVxdWlyZSgnLi4vdXRpbHMvZWRpdC9tYXhMZW5ndGguanMnKTtcbnZhciBnZXRBY3RpdmVFbGVtZW50ID0gcmVxdWlyZSgnLi4vdXRpbHMvZm9jdXMvZ2V0QWN0aXZlRWxlbWVudC5qcycpO1xucmVxdWlyZSgnQHRlc3RpbmctbGlicmFyeS9kb20vZGlzdC9oZWxwZXJzLmpzJyk7XG5yZXF1aXJlKCcuLi91dGlscy9rZXlEZWYvcmVhZE5leHREZXNjcmlwdG9yLmpzJyk7XG5yZXF1aXJlKCcuLi91dGlscy9taXNjL2xldmVsLmpzJyk7XG5yZXF1aXJlKCcuLi9vcHRpb25zLmpzJyk7XG5cbmZ1bmN0aW9uIF9kZWZpbmVfcHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7XG4gICAgaWYgKGtleSBpbiBvYmopIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbn1cbmV4cG9ydHMuRE9NX0tFWV9MT0NBVElPTiA9IHZvaWQgMDtcbihmdW5jdGlvbihET01fS0VZX0xPQ0FUSU9OKSB7XG4gICAgRE9NX0tFWV9MT0NBVElPTltET01fS0VZX0xPQ0FUSU9OW1wiU1RBTkRBUkRcIl0gPSAwXSA9IFwiU1RBTkRBUkRcIjtcbiAgICBET01fS0VZX0xPQ0FUSU9OW0RPTV9LRVlfTE9DQVRJT05bXCJMRUZUXCJdID0gMV0gPSBcIkxFRlRcIjtcbiAgICBET01fS0VZX0xPQ0FUSU9OW0RPTV9LRVlfTE9DQVRJT05bXCJSSUdIVFwiXSA9IDJdID0gXCJSSUdIVFwiO1xuICAgIERPTV9LRVlfTE9DQVRJT05bRE9NX0tFWV9MT0NBVElPTltcIk5VTVBBRFwiXSA9IDNdID0gXCJOVU1QQURcIjtcbn0pKGV4cG9ydHMuRE9NX0tFWV9MT0NBVElPTiB8fCAoZXhwb3J0cy5ET01fS0VZX0xPQ0FUSU9OID0ge30pKTtcbmNvbnN0IG1vZGlmaWVyS2V5cyA9IFtcbiAgICAnQWx0JyxcbiAgICAnQWx0R3JhcGgnLFxuICAgICdDb250cm9sJyxcbiAgICAnRm4nLFxuICAgICdNZXRhJyxcbiAgICAnU2hpZnQnLFxuICAgICdTeW1ib2wnXG5dO1xuZnVuY3Rpb24gaXNNb2RpZmllcktleShrZXkpIHtcbiAgICByZXR1cm4gbW9kaWZpZXJLZXlzLmluY2x1ZGVzKGtleSk7XG59XG5jb25zdCBtb2RpZmllckxvY2tzID0gW1xuICAgICdDYXBzTG9jaycsXG4gICAgJ0ZuTG9jaycsXG4gICAgJ051bUxvY2snLFxuICAgICdTY3JvbGxMb2NrJyxcbiAgICAnU3ltYm9sTG9jaydcbl07XG5mdW5jdGlvbiBpc01vZGlmaWVyTG9jayhrZXkpIHtcbiAgICByZXR1cm4gbW9kaWZpZXJMb2Nrcy5pbmNsdWRlcyhrZXkpO1xufVxuY2xhc3MgS2V5Ym9hcmRIb3N0IHtcbiAgICBpc0tleVByZXNzZWQoa2V5RGVmKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMucHJlc3NlZFtTdHJpbmcoa2V5RGVmLmNvZGUpXTtcbiAgICB9XG4gICAgZ2V0UHJlc3NlZEtleXMoKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKHRoaXMucHJlc3NlZCkubWFwKChwKT0+cC5rZXlEZWYpO1xuICAgIH1cbiAgICAvKiogUHJlc3MgYSBrZXkgKi8gYXN5bmMga2V5ZG93bihpbnN0YW5jZSwga2V5RGVmKSB7XG4gICAgICAgIHZhciAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVubmVjZXNzYXJ5LWNvbmRpdGlvblxuICAgICAgICBfdGhpc19wcmVzc2VkLCBfY29kZSwgX3RoaXNfcHJlc3NlZF9jb2RlO1xuICAgICAgICBjb25zdCBrZXkgPSBTdHJpbmcoa2V5RGVmLmtleSk7XG4gICAgICAgIGNvbnN0IGNvZGUgPSBTdHJpbmcoa2V5RGVmLmNvZGUpO1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBnZXRBY3RpdmVFbGVtZW50LmdldEFjdGl2ZUVsZW1lbnRPckJvZHkoaW5zdGFuY2UuY29uZmlnLmRvY3VtZW50KTtcbiAgICAgICAgdGhpcy5zZXRLZXlkb3duVGFyZ2V0KHRhcmdldCk7XG4gICAgICAgIHZhciBfO1xuICAgICAgICAoXyA9IChfdGhpc19wcmVzc2VkID0gdGhpcy5wcmVzc2VkKVtfY29kZSA9IGNvZGVdKSAhPT0gbnVsbCAmJiBfICE9PSB2b2lkIDAgPyBfIDogX3RoaXNfcHJlc3NlZFtfY29kZV0gPSB7XG4gICAgICAgICAgICBrZXlEZWYsXG4gICAgICAgICAgICB1bnByZXZlbnRlZERlZmF1bHQ6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIGlmIChpc01vZGlmaWVyS2V5KGtleSkpIHtcbiAgICAgICAgICAgIHRoaXMubW9kaWZpZXJzW2tleV0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVucHJldmVudGVkID0gaW5zdGFuY2UuZGlzcGF0Y2hVSUV2ZW50KHRhcmdldCwgJ2tleWRvd24nLCB7XG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICBjb2RlXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoaXNNb2RpZmllckxvY2soa2V5KSAmJiAhdGhpcy5tb2RpZmllcnNba2V5XSkge1xuICAgICAgICAgICAgdGhpcy5tb2RpZmllcnNba2V5XSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLm1vZGlmaWVyTG9ja1N0YXJ0W2tleV0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIChfdGhpc19wcmVzc2VkX2NvZGUgPSB0aGlzLnByZXNzZWRbY29kZV0pLnVucHJldmVudGVkRGVmYXVsdCB8fCAoX3RoaXNfcHJlc3NlZF9jb2RlLnVucHJldmVudGVkRGVmYXVsdCA9IHVucHJldmVudGVkKTtcbiAgICAgICAgaWYgKHVucHJldmVudGVkICYmIHRoaXMuaGFzS2V5UHJlc3Moa2V5KSkge1xuICAgICAgICAgICAgaW5zdGFuY2UuZGlzcGF0Y2hVSUV2ZW50KGdldEFjdGl2ZUVsZW1lbnQuZ2V0QWN0aXZlRWxlbWVudE9yQm9keShpbnN0YW5jZS5jb25maWcuZG9jdW1lbnQpLCAna2V5cHJlc3MnLCB7XG4gICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgIGNvZGUsXG4gICAgICAgICAgICAgICAgY2hhckNvZGU6IGtleURlZi5rZXkgPT09ICdFbnRlcicgPyAxMyA6IFN0cmluZyhrZXlEZWYua2V5KS5jaGFyQ29kZUF0KDApXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogUmVsZWFzZSBhIGtleSAqLyBhc3luYyBrZXl1cChpbnN0YW5jZSwga2V5RGVmKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IFN0cmluZyhrZXlEZWYua2V5KTtcbiAgICAgICAgY29uc3QgY29kZSA9IFN0cmluZyhrZXlEZWYuY29kZSk7XG4gICAgICAgIGNvbnN0IHVucHJldmVudGVkID0gdGhpcy5wcmVzc2VkW2NvZGVdLnVucHJldmVudGVkRGVmYXVsdDtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1keW5hbWljLWRlbGV0ZVxuICAgICAgICBkZWxldGUgdGhpcy5wcmVzc2VkW2NvZGVdO1xuICAgICAgICBpZiAoaXNNb2RpZmllcktleShrZXkpICYmICFPYmplY3QudmFsdWVzKHRoaXMucHJlc3NlZCkuZmluZCgocCk9PnAua2V5RGVmLmtleSA9PT0ga2V5KSkge1xuICAgICAgICAgICAgdGhpcy5tb2RpZmllcnNba2V5XSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGluc3RhbmNlLmRpc3BhdGNoVUlFdmVudChnZXRBY3RpdmVFbGVtZW50LmdldEFjdGl2ZUVsZW1lbnRPckJvZHkoaW5zdGFuY2UuY29uZmlnLmRvY3VtZW50KSwgJ2tleXVwJywge1xuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgY29kZVxuICAgICAgICB9LCAhdW5wcmV2ZW50ZWQpO1xuICAgICAgICBpZiAoaXNNb2RpZmllckxvY2soa2V5KSAmJiB0aGlzLm1vZGlmaWVyc1trZXldKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5tb2RpZmllckxvY2tTdGFydFtrZXldKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb2RpZmllckxvY2tTdGFydFtrZXldID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubW9kaWZpZXJzW2tleV0gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRLZXlkb3duVGFyZ2V0KHRhcmdldCkge1xuICAgICAgICBpZiAodGFyZ2V0ICE9PSB0aGlzLmxhc3RLZXlkb3duVGFyZ2V0KSB7XG4gICAgICAgICAgICB0aGlzLmNhcnJ5Q2hhciA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdEtleWRvd25UYXJnZXQgPSB0YXJnZXQ7XG4gICAgfVxuICAgIGhhc0tleVByZXNzKGtleSkge1xuICAgICAgICByZXR1cm4gKGtleS5sZW5ndGggPT09IDEgfHwga2V5ID09PSAnRW50ZXInKSAmJiAhdGhpcy5tb2RpZmllcnMuQ29udHJvbCAmJiAhdGhpcy5tb2RpZmllcnMuQWx0O1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihzeXN0ZW0pe1xuICAgICAgICBfZGVmaW5lX3Byb3BlcnR5KHRoaXMsIFwic3lzdGVtXCIsIHZvaWQgMCk7XG4gICAgICAgIF9kZWZpbmVfcHJvcGVydHkodGhpcywgXCJtb2RpZmllcnNcIiwge1xuICAgICAgICAgICAgQWx0OiBmYWxzZSxcbiAgICAgICAgICAgIEFsdEdyYXBoOiBmYWxzZSxcbiAgICAgICAgICAgIENhcHNMb2NrOiBmYWxzZSxcbiAgICAgICAgICAgIENvbnRyb2w6IGZhbHNlLFxuICAgICAgICAgICAgRm46IGZhbHNlLFxuICAgICAgICAgICAgRm5Mb2NrOiBmYWxzZSxcbiAgICAgICAgICAgIE1ldGE6IGZhbHNlLFxuICAgICAgICAgICAgTnVtTG9jazogZmFsc2UsXG4gICAgICAgICAgICBTY3JvbGxMb2NrOiBmYWxzZSxcbiAgICAgICAgICAgIFNoaWZ0OiBmYWxzZSxcbiAgICAgICAgICAgIFN5bWJvbDogZmFsc2UsXG4gICAgICAgICAgICBTeW1ib2xMb2NrOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgX2RlZmluZV9wcm9wZXJ0eSh0aGlzLCBcInByZXNzZWRcIiwge30pO1xuICAgICAgICBfZGVmaW5lX3Byb3BlcnR5KHRoaXMsIFwiY2FycnlDaGFyXCIsICcnKTtcbiAgICAgICAgX2RlZmluZV9wcm9wZXJ0eSh0aGlzLCBcImxhc3RLZXlkb3duVGFyZ2V0XCIsIHVuZGVmaW5lZCk7XG4gICAgICAgIF9kZWZpbmVfcHJvcGVydHkodGhpcywgXCJtb2RpZmllckxvY2tTdGFydFwiLCB7fSk7XG4gICAgICAgIHRoaXMuc3lzdGVtID0gc3lzdGVtO1xuICAgIH1cbn1cblxuZXhwb3J0cy5LZXlib2FyZEhvc3QgPSBLZXlib2FyZEhvc3Q7XG4iXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBRVpBLE1BQU0sQ0FBQ0MsY0FBYyxDQUFDQyxPQUFPLEVBQUUsWUFBWSxFQUFFO0VBQUVDLEtBQUssRUFBRTtBQUFLLENBQUMsQ0FBQztBQUU3REMsT0FBTyxDQUFDLG9DQUFvQyxDQUFDO0FBQzdDQSxPQUFPLENBQUMsb0NBQW9DLENBQUM7QUFDN0NBLE9BQU8sQ0FBQyw2QkFBNkIsQ0FBQztBQUN0Q0EsT0FBTyxDQUFDLDRCQUE0QixDQUFDO0FBQ3JDLElBQUlDLGdCQUFnQixHQUFHRCxPQUFPLENBQUMsb0NBQW9DLENBQUM7QUFDcEVBLE9BQU8sQ0FBQyxzQ0FBc0MsQ0FBQztBQUMvQ0EsT0FBTyxDQUFDLHVDQUF1QyxDQUFDO0FBQ2hEQSxPQUFPLENBQUMsd0JBQXdCLENBQUM7QUFDakNBLE9BQU8sQ0FBQyxlQUFlLENBQUM7QUFFeEIsU0FBU0UsZ0JBQWdCQSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUwsS0FBSyxFQUFFO0VBQ3ZDLElBQUlLLEdBQUcsSUFBSUQsR0FBRyxFQUFFO0lBQ1pQLE1BQU0sQ0FBQ0MsY0FBYyxDQUFDTSxHQUFHLEVBQUVDLEdBQUcsRUFBRTtNQUM1QkwsS0FBSyxFQUFFQSxLQUFLO01BQ1pNLFVBQVUsRUFBRSxJQUFJO01BQ2hCQyxZQUFZLEVBQUUsSUFBSTtNQUNsQkMsUUFBUSxFQUFFO0lBQ2QsQ0FBQyxDQUFDO0VBQ04sQ0FBQyxNQUFNO0lBQ0hKLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLEdBQUdMLEtBQUs7RUFDcEI7RUFDQSxPQUFPSSxHQUFHO0FBQ2Q7QUFDQUwsT0FBTyxDQUFDVSxnQkFBZ0IsR0FBRyxLQUFLLENBQUM7QUFDakMsQ0FBQyxVQUFTQSxnQkFBZ0IsRUFBRTtFQUN4QkEsZ0JBQWdCLENBQUNBLGdCQUFnQixDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLFVBQVU7RUFDL0RBLGdCQUFnQixDQUFDQSxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNO0VBQ3ZEQSxnQkFBZ0IsQ0FBQ0EsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsT0FBTztFQUN6REEsZ0JBQWdCLENBQUNBLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLFFBQVE7QUFDL0QsQ0FBQyxFQUFFVixPQUFPLENBQUNVLGdCQUFnQixLQUFLVixPQUFPLENBQUNVLGdCQUFnQixHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL0QsTUFBTUMsWUFBWSxHQUFHLENBQ2pCLEtBQUssRUFDTCxVQUFVLEVBQ1YsU0FBUyxFQUNULElBQUksRUFDSixNQUFNLEVBQ04sT0FBTyxFQUNQLFFBQVEsQ0FDWDtBQUNELFNBQVNDLGFBQWFBLENBQUNOLEdBQUcsRUFBRTtFQUN4QixPQUFPSyxZQUFZLENBQUNFLFFBQVEsQ0FBQ1AsR0FBRyxDQUFDO0FBQ3JDO0FBQ0EsTUFBTVEsYUFBYSxHQUFHLENBQ2xCLFVBQVUsRUFDVixRQUFRLEVBQ1IsU0FBUyxFQUNULFlBQVksRUFDWixZQUFZLENBQ2Y7QUFDRCxTQUFTQyxjQUFjQSxDQUFDVCxHQUFHLEVBQUU7RUFDekIsT0FBT1EsYUFBYSxDQUFDRCxRQUFRLENBQUNQLEdBQUcsQ0FBQztBQUN0QztBQUNBLE1BQU1VLFlBQVksQ0FBQztFQUNmQyxZQUFZQSxDQUFDQyxNQUFNLEVBQUU7SUFDakIsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDQyxPQUFPLENBQUNDLE1BQU0sQ0FBQ0YsTUFBTSxDQUFDRyxJQUFJLENBQUMsQ0FBQztFQUM5QztFQUNBQyxjQUFjQSxDQUFBLEVBQUc7SUFDYixPQUFPeEIsTUFBTSxDQUFDeUIsTUFBTSxDQUFDLElBQUksQ0FBQ0osT0FBTyxDQUFDLENBQUNLLEdBQUcsQ0FBRUMsQ0FBQyxJQUFHQSxDQUFDLENBQUNQLE1BQU0sQ0FBQztFQUN6RDtFQUNBO0VBQW1CLE1BQU1RLE9BQU9BLENBQUNDLFFBQVEsRUFBRVQsTUFBTSxFQUFFO0lBQy9DO01BQUk7TUFDSlUsYUFBYSxFQUFFQyxLQUFLLEVBQUVDLGtCQUFrQjtJQUN4QyxNQUFNeEIsR0FBRyxHQUFHYyxNQUFNLENBQUNGLE1BQU0sQ0FBQ1osR0FBRyxDQUFDO0lBQzlCLE1BQU1lLElBQUksR0FBR0QsTUFBTSxDQUFDRixNQUFNLENBQUNHLElBQUksQ0FBQztJQUNoQyxNQUFNVSxNQUFNLEdBQUc1QixnQkFBZ0IsQ0FBQzZCLHNCQUFzQixDQUFDTCxRQUFRLENBQUNNLE1BQU0sQ0FBQ0MsUUFBUSxDQUFDO0lBQ2hGLElBQUksQ0FBQ0MsZ0JBQWdCLENBQUNKLE1BQU0sQ0FBQztJQUM3QixJQUFJSyxDQUFDO0lBQ0wsQ0FBQ0EsQ0FBQyxHQUFHLENBQUNSLGFBQWEsR0FBRyxJQUFJLENBQUNULE9BQU8sRUFBRVUsS0FBSyxHQUFHUixJQUFJLENBQUMsTUFBTSxJQUFJLElBQUllLENBQUMsS0FBSyxLQUFLLENBQUMsR0FBR0EsQ0FBQyxHQUFHUixhQUFhLENBQUNDLEtBQUssQ0FBQyxHQUFHO01BQ3JHWCxNQUFNO01BQ05tQixrQkFBa0IsRUFBRTtJQUN4QixDQUFDO0lBQ0QsSUFBSXpCLGFBQWEsQ0FBQ04sR0FBRyxDQUFDLEVBQUU7TUFDcEIsSUFBSSxDQUFDZ0MsU0FBUyxDQUFDaEMsR0FBRyxDQUFDLEdBQUcsSUFBSTtJQUM5QjtJQUNBLE1BQU1pQyxXQUFXLEdBQUdaLFFBQVEsQ0FBQ2EsZUFBZSxDQUFDVCxNQUFNLEVBQUUsU0FBUyxFQUFFO01BQzVEekIsR0FBRztNQUNIZTtJQUNKLENBQUMsQ0FBQztJQUNGLElBQUlOLGNBQWMsQ0FBQ1QsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUNnQyxTQUFTLENBQUNoQyxHQUFHLENBQUMsRUFBRTtNQUM3QyxJQUFJLENBQUNnQyxTQUFTLENBQUNoQyxHQUFHLENBQUMsR0FBRyxJQUFJO01BQzFCLElBQUksQ0FBQ21DLGlCQUFpQixDQUFDbkMsR0FBRyxDQUFDLEdBQUcsSUFBSTtJQUN0QztJQUNBLENBQUN3QixrQkFBa0IsR0FBRyxJQUFJLENBQUNYLE9BQU8sQ0FBQ0UsSUFBSSxDQUFDLEVBQUVnQixrQkFBa0IsS0FBS1Asa0JBQWtCLENBQUNPLGtCQUFrQixHQUFHRSxXQUFXLENBQUM7SUFDckgsSUFBSUEsV0FBVyxJQUFJLElBQUksQ0FBQ0csV0FBVyxDQUFDcEMsR0FBRyxDQUFDLEVBQUU7TUFDdENxQixRQUFRLENBQUNhLGVBQWUsQ0FBQ3JDLGdCQUFnQixDQUFDNkIsc0JBQXNCLENBQUNMLFFBQVEsQ0FBQ00sTUFBTSxDQUFDQyxRQUFRLENBQUMsRUFBRSxVQUFVLEVBQUU7UUFDcEc1QixHQUFHO1FBQ0hlLElBQUk7UUFDSnNCLFFBQVEsRUFBRXpCLE1BQU0sQ0FBQ1osR0FBRyxLQUFLLE9BQU8sR0FBRyxFQUFFLEdBQUdjLE1BQU0sQ0FBQ0YsTUFBTSxDQUFDWixHQUFHLENBQUMsQ0FBQ3NDLFVBQVUsQ0FBQyxDQUFDO01BQzNFLENBQUMsQ0FBQztJQUNOO0VBQ0o7RUFDQTtFQUFxQixNQUFNQyxLQUFLQSxDQUFDbEIsUUFBUSxFQUFFVCxNQUFNLEVBQUU7SUFDL0MsTUFBTVosR0FBRyxHQUFHYyxNQUFNLENBQUNGLE1BQU0sQ0FBQ1osR0FBRyxDQUFDO0lBQzlCLE1BQU1lLElBQUksR0FBR0QsTUFBTSxDQUFDRixNQUFNLENBQUNHLElBQUksQ0FBQztJQUNoQyxNQUFNa0IsV0FBVyxHQUFHLElBQUksQ0FBQ3BCLE9BQU8sQ0FBQ0UsSUFBSSxDQUFDLENBQUNnQixrQkFBa0I7SUFDekQ7SUFDQSxPQUFPLElBQUksQ0FBQ2xCLE9BQU8sQ0FBQ0UsSUFBSSxDQUFDO0lBQ3pCLElBQUlULGFBQWEsQ0FBQ04sR0FBRyxDQUFDLElBQUksQ0FBQ1IsTUFBTSxDQUFDeUIsTUFBTSxDQUFDLElBQUksQ0FBQ0osT0FBTyxDQUFDLENBQUMyQixJQUFJLENBQUVyQixDQUFDLElBQUdBLENBQUMsQ0FBQ1AsTUFBTSxDQUFDWixHQUFHLEtBQUtBLEdBQUcsQ0FBQyxFQUFFO01BQ3BGLElBQUksQ0FBQ2dDLFNBQVMsQ0FBQ2hDLEdBQUcsQ0FBQyxHQUFHLEtBQUs7SUFDL0I7SUFDQXFCLFFBQVEsQ0FBQ2EsZUFBZSxDQUFDckMsZ0JBQWdCLENBQUM2QixzQkFBc0IsQ0FBQ0wsUUFBUSxDQUFDTSxNQUFNLENBQUNDLFFBQVEsQ0FBQyxFQUFFLE9BQU8sRUFBRTtNQUNqRzVCLEdBQUc7TUFDSGU7SUFDSixDQUFDLEVBQUUsQ0FBQ2tCLFdBQVcsQ0FBQztJQUNoQixJQUFJeEIsY0FBYyxDQUFDVCxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUNnQyxTQUFTLENBQUNoQyxHQUFHLENBQUMsRUFBRTtNQUM1QyxJQUFJLElBQUksQ0FBQ21DLGlCQUFpQixDQUFDbkMsR0FBRyxDQUFDLEVBQUU7UUFDN0IsSUFBSSxDQUFDbUMsaUJBQWlCLENBQUNuQyxHQUFHLENBQUMsR0FBRyxLQUFLO01BQ3ZDLENBQUMsTUFBTTtRQUNILElBQUksQ0FBQ2dDLFNBQVMsQ0FBQ2hDLEdBQUcsQ0FBQyxHQUFHLEtBQUs7TUFDL0I7SUFDSjtFQUNKO0VBQ0E2QixnQkFBZ0JBLENBQUNKLE1BQU0sRUFBRTtJQUNyQixJQUFJQSxNQUFNLEtBQUssSUFBSSxDQUFDZ0IsaUJBQWlCLEVBQUU7TUFDbkMsSUFBSSxDQUFDQyxTQUFTLEdBQUcsRUFBRTtJQUN2QjtJQUNBLElBQUksQ0FBQ0QsaUJBQWlCLEdBQUdoQixNQUFNO0VBQ25DO0VBQ0FXLFdBQVdBLENBQUNwQyxHQUFHLEVBQUU7SUFDYixPQUFPLENBQUNBLEdBQUcsQ0FBQzJDLE1BQU0sS0FBSyxDQUFDLElBQUkzQyxHQUFHLEtBQUssT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDZ0MsU0FBUyxDQUFDWSxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUNaLFNBQVMsQ0FBQ2EsR0FBRztFQUNsRztFQUNBQyxXQUFXQSxDQUFDQyxNQUFNLEVBQUM7SUFDZmpELGdCQUFnQixDQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDeENBLGdCQUFnQixDQUFDLElBQUksRUFBRSxXQUFXLEVBQUU7TUFDaEMrQyxHQUFHLEVBQUUsS0FBSztNQUNWRyxRQUFRLEVBQUUsS0FBSztNQUNmQyxRQUFRLEVBQUUsS0FBSztNQUNmTCxPQUFPLEVBQUUsS0FBSztNQUNkTSxFQUFFLEVBQUUsS0FBSztNQUNUQyxNQUFNLEVBQUUsS0FBSztNQUNiQyxJQUFJLEVBQUUsS0FBSztNQUNYQyxPQUFPLEVBQUUsS0FBSztNQUNkQyxVQUFVLEVBQUUsS0FBSztNQUNqQkMsS0FBSyxFQUFFLEtBQUs7TUFDWkMsTUFBTSxFQUFFLEtBQUs7TUFDYkMsVUFBVSxFQUFFO0lBQ2hCLENBQUMsQ0FBQztJQUNGM0QsZ0JBQWdCLENBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNyQ0EsZ0JBQWdCLENBQUMsSUFBSSxFQUFFLFdBQVcsRUFBRSxFQUFFLENBQUM7SUFDdkNBLGdCQUFnQixDQUFDLElBQUksRUFBRSxtQkFBbUIsRUFBRTRELFNBQVMsQ0FBQztJQUN0RDVELGdCQUFnQixDQUFDLElBQUksRUFBRSxtQkFBbUIsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUMvQyxJQUFJLENBQUNpRCxNQUFNLEdBQUdBLE1BQU07RUFDeEI7QUFDSjtBQUVBckQsT0FBTyxDQUFDZ0IsWUFBWSxHQUFHQSxZQUFZIn0=