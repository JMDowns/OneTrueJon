65fa3f36ac325bcc5e20bc701dbb03b6
'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});
require('../utils/click/isClickableInput.js');
var DataTransfer = require('../utils/dataTransfer/DataTransfer.js');
require('../utils/dataTransfer/Clipboard.js');
require('../utils/edit/isEditable.js');
require('../utils/edit/maxLength.js');
var getWindow = require('../utils/misc/getWindow.js');
var selection = require('../utils/focus/selection.js');
require('../utils/keyDef/readNextDescriptor.js');
require('../utils/misc/level.js');
require('../options.js');
var UI = require('./UI.js');
function copySelection(target) {
  const data = selection.hasOwnSelection(target) ? {
    'text/plain': readSelectedValueFromInput(target)
  } : {
    'text/plain': String(target.ownerDocument.getSelection())
  };
  const dt = DataTransfer.createDataTransfer(getWindow.getWindow(target));
  for (const type in data) {
    if (data[type]) {
      dt.setData(type, data[type]);
    }
  }
  return dt;
}
function readSelectedValueFromInput(target) {
  const sel = UI.getUISelection(target);
  const val = UI.getUIValue(target);
  return val.substring(sel.startOffset, sel.endOffset);
}
exports.copySelection = copySelection;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInJlcXVpcmUiLCJEYXRhVHJhbnNmZXIiLCJnZXRXaW5kb3ciLCJzZWxlY3Rpb24iLCJVSSIsImNvcHlTZWxlY3Rpb24iLCJ0YXJnZXQiLCJkYXRhIiwiaGFzT3duU2VsZWN0aW9uIiwicmVhZFNlbGVjdGVkVmFsdWVGcm9tSW5wdXQiLCJTdHJpbmciLCJvd25lckRvY3VtZW50IiwiZ2V0U2VsZWN0aW9uIiwiZHQiLCJjcmVhdGVEYXRhVHJhbnNmZXIiLCJ0eXBlIiwic2V0RGF0YSIsInNlbCIsImdldFVJU2VsZWN0aW9uIiwidmFsIiwiZ2V0VUlWYWx1ZSIsInN1YnN0cmluZyIsInN0YXJ0T2Zmc2V0IiwiZW5kT2Zmc2V0Il0sInNvdXJjZXMiOlsiY29weVNlbGVjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbnJlcXVpcmUoJy4uL3V0aWxzL2NsaWNrL2lzQ2xpY2thYmxlSW5wdXQuanMnKTtcbnZhciBEYXRhVHJhbnNmZXIgPSByZXF1aXJlKCcuLi91dGlscy9kYXRhVHJhbnNmZXIvRGF0YVRyYW5zZmVyLmpzJyk7XG5yZXF1aXJlKCcuLi91dGlscy9kYXRhVHJhbnNmZXIvQ2xpcGJvYXJkLmpzJyk7XG5yZXF1aXJlKCcuLi91dGlscy9lZGl0L2lzRWRpdGFibGUuanMnKTtcbnJlcXVpcmUoJy4uL3V0aWxzL2VkaXQvbWF4TGVuZ3RoLmpzJyk7XG52YXIgZ2V0V2luZG93ID0gcmVxdWlyZSgnLi4vdXRpbHMvbWlzYy9nZXRXaW5kb3cuanMnKTtcbnZhciBzZWxlY3Rpb24gPSByZXF1aXJlKCcuLi91dGlscy9mb2N1cy9zZWxlY3Rpb24uanMnKTtcbnJlcXVpcmUoJy4uL3V0aWxzL2tleURlZi9yZWFkTmV4dERlc2NyaXB0b3IuanMnKTtcbnJlcXVpcmUoJy4uL3V0aWxzL21pc2MvbGV2ZWwuanMnKTtcbnJlcXVpcmUoJy4uL29wdGlvbnMuanMnKTtcbnZhciBVSSA9IHJlcXVpcmUoJy4vVUkuanMnKTtcblxuZnVuY3Rpb24gY29weVNlbGVjdGlvbih0YXJnZXQpIHtcbiAgICBjb25zdCBkYXRhID0gc2VsZWN0aW9uLmhhc093blNlbGVjdGlvbih0YXJnZXQpID8ge1xuICAgICAgICAndGV4dC9wbGFpbic6IHJlYWRTZWxlY3RlZFZhbHVlRnJvbUlucHV0KHRhcmdldClcbiAgICB9IDoge1xuICAgICAgICAndGV4dC9wbGFpbic6IFN0cmluZyh0YXJnZXQub3duZXJEb2N1bWVudC5nZXRTZWxlY3Rpb24oKSlcbiAgICB9O1xuICAgIGNvbnN0IGR0ID0gRGF0YVRyYW5zZmVyLmNyZWF0ZURhdGFUcmFuc2ZlcihnZXRXaW5kb3cuZ2V0V2luZG93KHRhcmdldCkpO1xuICAgIGZvcihjb25zdCB0eXBlIGluIGRhdGEpe1xuICAgICAgICBpZiAoZGF0YVt0eXBlXSkge1xuICAgICAgICAgICAgZHQuc2V0RGF0YSh0eXBlLCBkYXRhW3R5cGVdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZHQ7XG59XG5mdW5jdGlvbiByZWFkU2VsZWN0ZWRWYWx1ZUZyb21JbnB1dCh0YXJnZXQpIHtcbiAgICBjb25zdCBzZWwgPSBVSS5nZXRVSVNlbGVjdGlvbih0YXJnZXQpO1xuICAgIGNvbnN0IHZhbCA9IFVJLmdldFVJVmFsdWUodGFyZ2V0KTtcbiAgICByZXR1cm4gdmFsLnN1YnN0cmluZyhzZWwuc3RhcnRPZmZzZXQsIHNlbC5lbmRPZmZzZXQpO1xufVxuXG5leHBvcnRzLmNvcHlTZWxlY3Rpb24gPSBjb3B5U2VsZWN0aW9uO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUVaQSxNQUFNLENBQUNDLGNBQWMsQ0FBQ0MsT0FBTyxFQUFFLFlBQVksRUFBRTtFQUFFQyxLQUFLLEVBQUU7QUFBSyxDQUFDLENBQUM7QUFFN0RDLE9BQU8sQ0FBQyxvQ0FBb0MsQ0FBQztBQUM3QyxJQUFJQyxZQUFZLEdBQUdELE9BQU8sQ0FBQyx1Q0FBdUMsQ0FBQztBQUNuRUEsT0FBTyxDQUFDLG9DQUFvQyxDQUFDO0FBQzdDQSxPQUFPLENBQUMsNkJBQTZCLENBQUM7QUFDdENBLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQztBQUNyQyxJQUFJRSxTQUFTLEdBQUdGLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQztBQUNyRCxJQUFJRyxTQUFTLEdBQUdILE9BQU8sQ0FBQyw2QkFBNkIsQ0FBQztBQUN0REEsT0FBTyxDQUFDLHVDQUF1QyxDQUFDO0FBQ2hEQSxPQUFPLENBQUMsd0JBQXdCLENBQUM7QUFDakNBLE9BQU8sQ0FBQyxlQUFlLENBQUM7QUFDeEIsSUFBSUksRUFBRSxHQUFHSixPQUFPLENBQUMsU0FBUyxDQUFDO0FBRTNCLFNBQVNLLGFBQWFBLENBQUNDLE1BQU0sRUFBRTtFQUMzQixNQUFNQyxJQUFJLEdBQUdKLFNBQVMsQ0FBQ0ssZUFBZSxDQUFDRixNQUFNLENBQUMsR0FBRztJQUM3QyxZQUFZLEVBQUVHLDBCQUEwQixDQUFDSCxNQUFNO0VBQ25ELENBQUMsR0FBRztJQUNBLFlBQVksRUFBRUksTUFBTSxDQUFDSixNQUFNLENBQUNLLGFBQWEsQ0FBQ0MsWUFBWSxDQUFDLENBQUM7RUFDNUQsQ0FBQztFQUNELE1BQU1DLEVBQUUsR0FBR1osWUFBWSxDQUFDYSxrQkFBa0IsQ0FBQ1osU0FBUyxDQUFDQSxTQUFTLENBQUNJLE1BQU0sQ0FBQyxDQUFDO0VBQ3ZFLEtBQUksTUFBTVMsSUFBSSxJQUFJUixJQUFJLEVBQUM7SUFDbkIsSUFBSUEsSUFBSSxDQUFDUSxJQUFJLENBQUMsRUFBRTtNQUNaRixFQUFFLENBQUNHLE9BQU8sQ0FBQ0QsSUFBSSxFQUFFUixJQUFJLENBQUNRLElBQUksQ0FBQyxDQUFDO0lBQ2hDO0VBQ0o7RUFDQSxPQUFPRixFQUFFO0FBQ2I7QUFDQSxTQUFTSiwwQkFBMEJBLENBQUNILE1BQU0sRUFBRTtFQUN4QyxNQUFNVyxHQUFHLEdBQUdiLEVBQUUsQ0FBQ2MsY0FBYyxDQUFDWixNQUFNLENBQUM7RUFDckMsTUFBTWEsR0FBRyxHQUFHZixFQUFFLENBQUNnQixVQUFVLENBQUNkLE1BQU0sQ0FBQztFQUNqQyxPQUFPYSxHQUFHLENBQUNFLFNBQVMsQ0FBQ0osR0FBRyxDQUFDSyxXQUFXLEVBQUVMLEdBQUcsQ0FBQ00sU0FBUyxDQUFDO0FBQ3hEO0FBRUF6QixPQUFPLENBQUNPLGFBQWEsR0FBR0EsYUFBYSJ9