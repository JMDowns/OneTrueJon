{"version":3,"names":["Object","defineProperty","exports","value","require","isDisabled","getTreeDiff","focus","setSelectionPerMouse","modifySelectionPerMouse","buttons","shared","_define_property","obj","key","enumerable","configurable","writable","Mouse","move","instance","position","prevPosition","prevTarget","getTarget","isDifferentPointerPosition","nextTarget","init","getEventInit","leave","enter","dispatchUIEvent","forEach","el","modifySelecting","down","keyDef","pointer","button","undefined","target","buttonDownTarget","disabled","startSelecting","detail","focusElement","getMouseEventButton","up","endSelecting","clickTarget","resetClickCount","clickCount","reset","type","coords","pointerId","pointerType","isPrimary","getButtons","getOnDown","getOnUp","incOnClick","_this_position_target","config","document","body","_this_position_caret","_this_position_caret1","selecting","setSelectionPerMouseDown","node","caret","offset","modifySelectionPerMouseMove","constructor","Buttons","current","Number","count","_this_count_button","_this_count_button1"],"sources":["mouse.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nrequire('../../event/behavior/click.js');\nrequire('../../event/behavior/cut.js');\nrequire('../../event/behavior/keydown.js');\nrequire('../../event/behavior/keypress.js');\nrequire('../../event/behavior/keyup.js');\nrequire('../../event/behavior/paste.js');\nrequire('@testing-library/dom');\nrequire('../../event/eventMap.js');\nrequire('../../utils/click/isClickableInput.js');\nrequire('../../utils/dataTransfer/Clipboard.js');\nrequire('../../utils/edit/isEditable.js');\nrequire('../../utils/edit/maxLength.js');\nvar isDisabled = require('../../utils/misc/isDisabled.js');\nrequire('@testing-library/dom/dist/helpers.js');\nrequire('../../utils/keyDef/readNextDescriptor.js');\nvar getTreeDiff = require('../../utils/misc/getTreeDiff.js');\nrequire('../../utils/misc/level.js');\nrequire('../../options.js');\nvar focus = require('../../event/focus.js');\nvar setSelectionPerMouse = require('../../event/selection/setSelectionPerMouse.js');\nvar modifySelectionPerMouse = require('../../event/selection/modifySelectionPerMouse.js');\nvar buttons = require('./buttons.js');\nvar shared = require('./shared.js');\n\nfunction _define_property(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\n/**\n * This object is the single \"virtual\" mouse that might be controlled by multiple different pointer devices.\n */ class Mouse {\n    move(instance, position) {\n        const prevPosition = this.position;\n        const prevTarget = this.getTarget(instance);\n        this.position = position;\n        if (!shared.isDifferentPointerPosition(prevPosition, position)) {\n            return;\n        }\n        const nextTarget = this.getTarget(instance);\n        const init = this.getEventInit('mousemove');\n        const [leave, enter] = getTreeDiff.getTreeDiff(prevTarget, nextTarget);\n        return {\n            leave: ()=>{\n                if (prevTarget !== nextTarget) {\n                    instance.dispatchUIEvent(prevTarget, 'mouseout', init);\n                    leave.forEach((el)=>instance.dispatchUIEvent(el, 'mouseleave', init));\n                }\n            },\n            enter: ()=>{\n                if (prevTarget !== nextTarget) {\n                    instance.dispatchUIEvent(nextTarget, 'mouseover', init);\n                    enter.forEach((el)=>instance.dispatchUIEvent(el, 'mouseenter', init));\n                }\n            },\n            move: ()=>{\n                instance.dispatchUIEvent(nextTarget, 'mousemove', init);\n                this.modifySelecting(instance);\n            }\n        };\n    }\n    down(instance, keyDef, pointer) {\n        const button = this.buttons.down(keyDef);\n        if (button === undefined) {\n            return;\n        }\n        const target = this.getTarget(instance);\n        this.buttonDownTarget[button] = target;\n        const disabled = isDisabled.isDisabled(target);\n        const init = this.getEventInit('mousedown', keyDef.button);\n        if (disabled || instance.dispatchUIEvent(target, 'mousedown', init)) {\n            this.startSelecting(instance, init.detail);\n            focus.focusElement(target);\n        }\n        if (!disabled && buttons.getMouseEventButton(keyDef.button) === 2) {\n            instance.dispatchUIEvent(target, 'contextmenu', this.getEventInit('contextmenu', keyDef.button, pointer));\n        }\n    }\n    up(instance, keyDef, pointer) {\n        const button = this.buttons.up(keyDef);\n        if (button === undefined) {\n            return;\n        }\n        const target = this.getTarget(instance);\n        if (!isDisabled.isDisabled(target)) {\n            instance.dispatchUIEvent(target, 'mouseup', this.getEventInit('mouseup', keyDef.button));\n            this.endSelecting();\n            const clickTarget = getTreeDiff.getTreeDiff(this.buttonDownTarget[button], target)[2][0];\n            if (clickTarget) {\n                const init = this.getEventInit('click', keyDef.button, pointer);\n                if (init.detail) {\n                    instance.dispatchUIEvent(clickTarget, init.button === 0 ? 'click' : 'auxclick', init);\n                    if (init.button === 0 && init.detail === 2) {\n                        instance.dispatchUIEvent(clickTarget, 'dblclick', {\n                            ...this.getEventInit('dblclick', keyDef.button),\n                            detail: init.detail\n                        });\n                    }\n                }\n            }\n        }\n    }\n    resetClickCount() {\n        this.clickCount.reset();\n    }\n    getEventInit(type, button, pointer) {\n        const init = {\n            ...this.position.coords\n        };\n        if (pointer) {\n            init.pointerId = pointer.pointerId;\n            init.pointerType = pointer.pointerType;\n            init.isPrimary = pointer.isPrimary;\n        }\n        init.button = buttons.getMouseEventButton(button);\n        init.buttons = this.buttons.getButtons();\n        if (type === 'mousedown') {\n            init.detail = this.clickCount.getOnDown(init.button);\n        } else if (type === 'mouseup') {\n            init.detail = this.clickCount.getOnUp(init.button);\n        } else if (type === 'click' || type === 'auxclick') {\n            init.detail = this.clickCount.incOnClick(init.button);\n        }\n        return init;\n    }\n    getTarget(instance) {\n        var _this_position_target;\n        return (_this_position_target = this.position.target) !== null && _this_position_target !== void 0 ? _this_position_target : instance.config.document.body;\n    }\n    startSelecting(instance, clickCount) {\n        var _this_position_caret, _this_position_caret1;\n        // TODO: support extending range (shift)\n        this.selecting = setSelectionPerMouse.setSelectionPerMouseDown({\n            document: instance.config.document,\n            target: this.getTarget(instance),\n            node: (_this_position_caret = this.position.caret) === null || _this_position_caret === void 0 ? void 0 : _this_position_caret.node,\n            offset: (_this_position_caret1 = this.position.caret) === null || _this_position_caret1 === void 0 ? void 0 : _this_position_caret1.offset,\n            clickCount\n        });\n    }\n    modifySelecting(instance) {\n        var _this_position_caret, _this_position_caret1;\n        if (!this.selecting) {\n            return;\n        }\n        modifySelectionPerMouse.modifySelectionPerMouseMove(this.selecting, {\n            document: instance.config.document,\n            target: this.getTarget(instance),\n            node: (_this_position_caret = this.position.caret) === null || _this_position_caret === void 0 ? void 0 : _this_position_caret.node,\n            offset: (_this_position_caret1 = this.position.caret) === null || _this_position_caret1 === void 0 ? void 0 : _this_position_caret1.offset\n        });\n    }\n    endSelecting() {\n        this.selecting = undefined;\n    }\n    constructor(){\n        _define_property(this, \"position\", {});\n        _define_property(this, \"buttons\", new buttons.Buttons());\n        _define_property(this, \"selecting\", void 0);\n        _define_property(this, \"buttonDownTarget\", {});\n        // According to spec the `detail` on click events should be the number\n        // of *consecutive* clicks with a specific button.\n        // On `mousedown` and `mouseup` it should be this number increased by one.\n        // But the browsers don't implement it this way.\n        // If another button is pressed,\n        //   in Webkit: the `mouseup` on the previously pressed button has `detail: 0` and no `click`/`auxclick`.\n        //   in Gecko: the `mouseup` and click events have the same detail as the `mousedown`.\n        // If there is a delay while a button is pressed,\n        // the `mouseup` and `click` are normal, but a following `mousedown` starts a new click count.\n        // We'll follow the minimal implementation of Webkit.\n        _define_property(this, \"clickCount\", new class {\n            incOnClick(button) {\n                const current = this.down[button] === undefined ? undefined : Number(this.down[button]) + 1;\n                this.count = this.count[button] === undefined ? {} : {\n                    [button]: Number(this.count[button]) + 1\n                };\n                return current;\n            }\n            getOnDown(button) {\n                var _this_count_button;\n                this.down = {\n                    [button]: (_this_count_button = this.count[button]) !== null && _this_count_button !== void 0 ? _this_count_button : 0\n                };\n                var _this_count_button1;\n                this.count = {\n                    [button]: (_this_count_button1 = this.count[button]) !== null && _this_count_button1 !== void 0 ? _this_count_button1 : 0\n                };\n                return Number(this.count[button]) + 1;\n            }\n            getOnUp(button) {\n                return this.down[button] === undefined ? undefined : Number(this.down[button]) + 1;\n            }\n            reset() {\n                this.count = {};\n            }\n            constructor(){\n                _define_property(this, \"down\", {});\n                _define_property(this, \"count\", {});\n            }\n        }());\n    }\n}\n\nexports.Mouse = Mouse;\n"],"mappings":"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"}